
> quake2ts-explorer@0.1.0 test:coverage
> NODE_OPTIONS='--max-old-space-size=2048' jest --config jest.unit.config.js --coverage --runInBand

PASS unit tests/unit/services/networkService.test.ts
PASS unit tests/unit/App.test.tsx
  ● Console

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: TypeError: file.arrayBuffer is not a function
          at PakService.arrayBuffer (/app/src/services/pakService.ts:168:31)
          at loadPakFile (/app/src/hooks/usePakExplorer.ts:178:36)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: TypeError: file.arrayBuffer is not a function
          at PakService.arrayBuffer (/app/src/services/pakService.ts:168:31)
          at loadPakFile (/app/src/hooks/usePakExplorer.ts:178:36)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: TypeError: file.arrayBuffer is not a function
          at PakService.arrayBuffer (/app/src/services/pakService.ts:168:31)
          at PakService.<anonymous> (/app/node_modules/jest-mock/build/index.js:794:25)
          at /app/node_modules/jest-mock/build/index.js:397:39
          at PakService.<anonymous> (/app/node_modules/jest-mock/build/index.js:404:13)
          at PakService.mockConstructor (/app/node_modules/jest-mock/build/index.js:148:19)
          at loadPakFile (/app/src/hooks/usePakExplorer.ts:178:36)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

PASS unit tests/unit/components/UniversalViewer.test.tsx
  ● Console

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:155:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:155:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:173:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:173:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:204:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:204:13)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at load (src/components/UniversalViewer/UniversalViewer.tsx:725:35)
      at initAdapter (src/components/UniversalViewer/UniversalViewer.tsx:773:6)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:204:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:221:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:221:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:245:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:245:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:266:34)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:266:34)

PASS unit tests/unit/pakService.treeBuilding.test.ts
  ● Console

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:113:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:113:7)

    console.log
      [PakService] Fallback for empty.pak, creating PakArchive with pakId=b4ca2635-b15f-4782-9039-54b312b9c909, archive.name=b4ca2635-b15f-4782-9039-54b312b9c909

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:125:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:125:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=88a945db-5465-445c-98ef-c18192f314d2, archive.name=88a945db-5465-445c-98ef-c18192f314d2

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:135:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:135:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=8729aaf2-69c5-4d83-95c2-4d63132ad10a, archive.name=8729aaf2-69c5-4d83-95c2-4d63132ad10a

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:149:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:149:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=f52c1404-a3b6-4358-a206-b9c4c14ff840, archive.name=f52c1404-a3b6-4358-a206-b9c4c14ff840

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:169:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:169:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=9ce419fb-8a86-4fdc-9b0b-445db9f272d2, archive.name=9ce419fb-8a86-4fdc-9b0b-445db9f272d2

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:195:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:195:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=c2aa2a0a-9322-4ee6-b14f-f1895c8c1209, archive.name=c2aa2a0a-9322-4ee6-b14f-f1895c8c1209

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 3 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:215:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:215:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=c536c63e-1c57-464c-8e56-330d75c1d76d, archive.name=c536c63e-1c57-464c-8e56-330d75c1d76d

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 4 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:239:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:239:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=7d85895f-e17f-4f86-bcbe-604299b7be20, archive.name=7d85895f-e17f-4f86-bcbe-604299b7be20

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 4 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:262:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:262:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=3d2beac3-b17d-44e9-8034-5f7872c86965, archive.name=3d2beac3-b17d-44e9-8034-5f7872c86965

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 2 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:278:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:278:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=da11c134-9c2a-47d2-97f1-7b19c13a7b68, archive.name=da11c134-9c2a-47d2-97f1-7b19c13a7b68

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 4 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:294:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:294:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=6aa3010d-9c6d-4c5a-b0ba-d174a70391ee, archive.name=6aa3010d-9c6d-4c5a-b0ba-d174a70391ee

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 4 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:323:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:323:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=69db5157-b100-4dca-a2a7-13f8000b3081, archive.name=69db5157-b100-4dca-a2a7-13f8000b3081

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 9 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:362:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:362:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=e91fa84e-d57d-41dc-8f51-0b5a368b396b, archive.name=e91fa84e-d57d-41dc-8f51-0b5a368b396b

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 2 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:381:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:381:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=1ef7cb63-2caa-494e-bb64-6d8b4281ee31, archive.name=1ef7cb63-2caa-494e-bb64-6d8b4281ee31

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:392:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:392:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=4476022b-466a-4c51-8648-1bbe74abd5b3, archive.name=4476022b-466a-4c51-8648-1bbe74abd5b3

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:402:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:402:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=8871a119-de08-4d75-b12b-372333b2d6a2, archive.name=8871a119-de08-4d75-b12b-372333b2d6a2

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:422:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:422:7)

    console.log
      [PakService] Fallback for my.pak, creating PakArchive with pakId=e27f2ff8-e374-46e0-a434-67d442721a4f, archive.name=e27f2ff8-e374-46e0-a434-67d442721a4f

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:435:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:435:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=62270e0c-fda5-4ba7-b774-1062560a0af2, archive.name=62270e0c-fda5-4ba7-b774-1062560a0af2

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

PASS unit tests/unit/components/DemoTimeline.test.tsx
PASS unit tests/unit/components/GameHUD.test.tsx
PASS unit tests/unit/App.coverage.test.tsx
  ● Console

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

PASS unit tests/unit/hooks/usePakExplorer.test.tsx
  ● Console

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=by-pak

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.error
      Failed to start game mode: Error: Game init failed
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:272:63)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      360 |       // Only handle error if this request is still active
      361 |       if (requestId === activeGameRequestRef.current) {
    > 362 |           console.error("Failed to start game mode:", err);
          |                   ^
      363 |           setError(err instanceof Error ? err.message : 'Failed to start game mode');
      364 |           stopGameMode();
      365 |       }

      at Object.error [as startGameMode] (src/hooks/usePakExplorer.ts:362:19)
      at tests/unit/hooks/usePakExplorer.test.tsx:295:13

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.warn
      Skipping pak.pak because content-type is text/html

      141 |                 const type = res.headers.get('content-type');
      142 |                 if (type && type.toLowerCase().includes('text/html')) {
    > 143 |                     console.warn(`Skipping ${url} because content-type is text/html`);
          |                             ^
      144 |                     continue;
      145 |                 }
      146 |                 const buffer = await res.arrayBuffer();

      at warn (src/hooks/usePakExplorer.ts:143:29)
      at init (src/hooks/usePakExplorer.ts:164:15)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.warn
      Failed to load pak-manifest.json, skipping built-in paks.

      132 |         }
      133 |     } catch (e) {
    > 134 |         console.warn("Failed to load pak-manifest.json, skipping built-in paks.");
          |                 ^
      135 |     }
      136 |
      137 |     for (const url of paksToLoad) {

      at warn (src/hooks/usePakExplorer.ts:134:17)
      at init (src/hooks/usePakExplorer.ts:164:15)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

PASS unit tests/unit/components/UniversalViewer/adapters/BspAdapter.test.ts
PASS unit tests/unit/components/SoundAnalyzer.test.tsx
PASS unit tests/unit/pakService.real.test.ts
  ● Console

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:58:23)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:58:23)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=3b537a9d-75c6-478f-8da9-5b6477cc3cce, archive.name=3b537a9d-75c6-478f-8da9-5b6477cc3cce

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:64:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:64:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=94eac94a-4887-495e-81a2-b4c2fcdfe296, archive.name=94eac94a-4887-495e-81a2-b4c2fcdfe296

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:76:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:76:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=c640c06d-9473-4073-aa7e-4c8864ad2d40, archive.name=c640c06d-9473-4073-aa7e-4c8864ad2d40

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:76:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:76:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=c7339d5d-2387-4794-a26c-a71ebaa5affc, archive.name=c7339d5d-2387-4794-a26c-a71ebaa5affc

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=8d58a976-36e5-42de-93a7-6a6a315a7162, archive.name=8d58a976-36e5-42de-93a7-6a6a315a7162

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=845dd8f4-4a3f-4a1a-b27e-26da1272a4d9, archive.name=845dd8f4-4a3f-4a1a-b27e-26da1272a4d9

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=32a38f12-c359-46b7-90f9-e58f4983a5d7, archive.name=32a38f12-c359-46b7-90f9-e58f4983a5d7

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=383a2db7-94e2-4317-844b-5aa6eba3c54d, archive.name=383a2db7-94e2-4317-844b-5aa6eba3c54d

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=2392d3c0-348c-45aa-95f1-cdb9b5b50726, archive.name=2392d3c0-348c-45aa-95f1-cdb9b5b50726

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=2493e8f5-87c6-4131-b764-0249e66b4af0, archive.name=2493e8f5-87c6-4131-b764-0249e66b4af0

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=3e0d0c81-050a-4732-a488-41129f476356, archive.name=3e0d0c81-050a-4732-a488-41129f476356

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=14897a64-948c-4dd0-b86c-804a9645a878, archive.name=14897a64-948c-4dd0-b86c-804a9645a878

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=aea8c6ab-641f-4120-ba34-4b75870e0afd, archive.name=aea8c6ab-641f-4120-ba34-4b75870e0afd

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=1e0f961c-219c-4955-8175-a41cc4b23f7d, archive.name=1e0f961c-219c-4955-8175-a41cc4b23f7d

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=59ff2e35-3964-452b-924a-df2bfdc67a2b, archive.name=59ff2e35-3964-452b-924a-df2bfdc67a2b

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=3f96f89b-affa-4b0a-9c14-b143a7e4c2b0, archive.name=3f96f89b-affa-4b0a-9c14-b143a7e4c2b0

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=f4e2e0b8-1bde-4f8c-9f61-6d35e3e80c0e, archive.name=f4e2e0b8-1bde-4f8c-9f61-6d35e3e80c0e

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=6f4e802a-4910-4768-95ff-d06fa8f25630, archive.name=6f4e802a-4910-4768-95ff-d06fa8f25630

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:239:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:239:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=e9d91ab5-5a60-49a1-a6fd-2023780f5d40, archive.name=e9d91ab5-5a60-49a1-a6fd-2023780f5d40

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:247:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:247:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=3087ffa9-c098-4d3c-948d-1e096dba4818, archive.name=3087ffa9-c098-4d3c-948d-1e096dba4818

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

PASS unit tests/unit/services/screenshotService.burst.test.ts
PASS unit tests/unit/components/UniversalViewer/ViewerControls.test.tsx
PASS unit tests/unit/MetadataPanel.test.tsx
PASS unit tests/unit/components/DemoTimeline.coverage.test.tsx
PASS unit tests/unit/components/SoundAnalyzer.coverage.test.tsx
PASS unit tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx
  ● Console

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:61:15)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:61:15)

    console.error
      An update to UniversalViewer inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      726 |                  performanceService.endMeasure('asset-load');
      727 |
    > 728 |                  setAdapter(newAdapter);
          |                  ^
      729 |                  if (onAdapterReady) {
      730 |                      onAdapterReady(newAdapter);
      731 |                  }

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setAdapter (src/components/UniversalViewer/UniversalViewer.tsx:728:18)

    console.error
      An update to UniversalViewer inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      755 |              } else {
      756 |                  // Models
    > 757 |                  setCameraMode('orbit');
          |                  ^
      758 |                  setOrbit({
      759 |                     radius: 100,
      760 |                     theta: 0,

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setCameraMode (src/components/UniversalViewer/UniversalViewer.tsx:757:18)

    console.error
      An update to UniversalViewer inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      756 |                  // Models
      757 |                  setCameraMode('orbit');
    > 758 |                  setOrbit({
          |                  ^
      759 |                     radius: 100,
      760 |                     theta: 0,
      761 |                     phi: Math.PI / 4,

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setOrbit (src/components/UniversalViewer/UniversalViewer.tsx:758:18)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:119:16)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:119:16)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:162:16)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:162:16)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:207:16)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:207:16)

PASS unit tests/unit/services/indexedDBService.test.ts
PASS unit tests/unit/components/ServerBrowser.integration.test.tsx
PASS unit tests/unit/components/UniversalViewer/UniversalViewerCamera.test.tsx
  ● Console

    console.error
      Failed to init post processor: TypeError: this.gl.createShader is not a function
          at PostProcessor.createShader [as compileShader] (/app/src/utils/postProcessing.ts:174:32)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Adapter Init Failed TypeError: Cannot read properties of undefined (reading 'entities')
          at BspAdapter.entities [as loadMap] (/app/src/components/UniversalViewer/adapters/BspAdapter.ts:88:18)
          at BspAdapter.loadMap [as load] (/app/src/components/UniversalViewer/adapters/BspAdapter.ts:61:16)
          at load (/app/src/components/UniversalViewer/UniversalViewer.tsx:725:35)
          at initAdapter (/app/src/components/UniversalViewer/UniversalViewer.tsx:773:6)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      765 |
      766 |          } catch (e) {
    > 767 |              console.error("Adapter Init Failed", e);
          |                      ^
      768 |              setError(`Failed to load viewer: ${e instanceof Error ? e.message : String(e)}`);
      769 |              newAdapter?.cleanup();
      770 |          }

      at error (src/components/UniversalViewer/UniversalViewer.tsx:767:22)

PASS unit tests/unit/components/EntityDatabase.test.tsx
PASS unit tests/unit/components/UniversalViewer/UniversalViewerScreenshot.test.tsx
  ● Console

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

PASS unit tests/unit/utils/surfaceFlagParser.coverage.test.ts
PASS unit tests/unit/usePakExplorer.test.ts
  ● Console

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.handleFileSelect (/app/src/hooks/usePakExplorer.ts:92:13)
          at /app/tests/unit/usePakExplorer.test.ts:163:7

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.handleFileSelect (src/hooks/usePakExplorer.ts:92:13)
      at tests/unit/usePakExplorer.test.ts:163:7

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=mock-id, archive.name=mock-id

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 1 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=1, fileCount=1

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.loadFromUrl (/app/src/hooks/usePakExplorer.ts:231:9)
          at /app/tests/unit/usePakExplorer.test.ts:202:7

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.loadFromUrl (src/hooks/usePakExplorer.ts:231:9)
      at tests/unit/usePakExplorer.test.ts:202:7

    console.log
      [PakService] Fallback for default.pak, creating PakArchive with pakId=222901ac-a6bb-4c26-8839-a9dd23f13463, archive.name=222901ac-a6bb-4c26-8839-a9dd23f13463

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 1 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=1, fileCount=1

      at log (src/hooks/usePakExplorer.ts:73:13)

PASS unit tests/unit/services/predictionService.coverage.test.ts
PASS unit tests/unit/components/SoundAnalyzerBranch.test.tsx
PASS unit tests/unit/components/settings/AdvancedSettings.coverage.test.tsx
  ● Console

    console.error
      Failed to clear cache Error: Fail
          at Object.<anonymous> (/app/tests/unit/components/settings/AdvancedSettings.coverage.test.tsx:106:60)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      19 |       alert('Cache cleared successfully.');
      20 |     } catch (e) {
    > 21 |       console.error('Failed to clear cache', e);
         |               ^
      22 |       alert('Failed to clear cache.');
      23 |     }
      24 |   };

      at error (src/components/settings/AdvancedSettings.tsx:21:15)

    console.log
      Deleted database Quake2TS

      at log (src/components/settings/AdvancedSettings.tsx:45:29)
          at Array.map (<anonymous>)

    console.log
      Deleted database Quake2TS-Saves

      at log (src/components/settings/AdvancedSettings.tsx:45:29)
          at Array.map (<anonymous>)

    console.log
      Deleted database Quake2TS-Demos

      at log (src/components/settings/AdvancedSettings.tsx:45:29)
          at Array.map (<anonymous>)

    console.log
      Deleted database quake2ts-cache

      at log (src/components/settings/AdvancedSettings.tsx:45:29)
          at Array.map (<anonymous>)

PASS unit tests/unit/components/DemoBrowser.search.test.tsx

  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Failed to cache thumbnail TypeError: Cannot read properties of undefined (reading 'createElement')
        at ThumbnailService.generateThumbnail (/app/src/services/thumbnailService.ts:460:40)
        at cacheThumbnail (/app/src/components/TextureAtlas.tsx:4915:28)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)".



      at ThumbnailService.generateThumbnail (src/services/thumbnailService.ts:460:40)
      at cacheThumbnail (src/components/TextureAtlas.tsx:4915:28)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)".
      at console.warn (node_modules/@jest/console/build/BufferedConsole.js:191:10)
      at cacheThumbnail (src/components/TextureAtlas.tsx:4940:17)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Failed to cache thumbnail TypeError: Cannot read properties of undefined (reading 'createElement')
        at ThumbnailService.generateThumbnail (/app/src/services/thumbnailService.ts:460:40)
        at cacheThumbnail (/app/src/components/TextureAtlas.tsx:4915:28)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)".



      at ThumbnailService.generateThumbnail (src/services/thumbnailService.ts:460:40)
      at cacheThumbnail (src/components/TextureAtlas.tsx:4915:28)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)".
      at console.warn (node_modules/@jest/console/build/BufferedConsole.js:191:10)
      at cacheThumbnail (src/components/TextureAtlas.tsx:4940:17)

PASS unit tests/unit/PreviewPanel/PreviewPanel.test.tsx
PASS unit tests/unit/components/UniversalViewer/UniversalViewerDemoStats.test.tsx
  ● Console

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

PASS unit tests/unit/components/TextureAtlas.test.tsx
PASS unit tests/unit/components/settings/GraphicsSettings.coverage.test.tsx
PASS unit tests/unit/workers/assetProcessor.worker.test.ts
PASS unit tests/unit/FileTree.test.tsx
PASS unit tests/unit/components/settings/AccessibilitySettings.coverage.test.tsx
PASS unit tests/unit/Toolbar.test.tsx
PASS unit tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx
  ● Console

    console.error
      Failed to init post processor: TypeError: this.gl.createShader is not a function
          at PostProcessor.createShader [as compileShader] (/app/src/utils/postProcessing.ts:174:32)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx:123:35)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx:123:35)

    console.error
      Failed to init post processor: TypeError: this.gl.createShader is not a function
          at PostProcessor.createShader [as compileShader] (/app/src/utils/postProcessing.ts:174:32)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx:164:35)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx:164:35)

PASS unit tests/unit/pakService.test.ts
  ● Console

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:164:23)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:164:23)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=38cba3f4-36f6-4d1e-99f1-362f44438cc9, archive.name=38cba3f4-36f6-4d1e-99f1-362f44438cc9

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:174:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:174:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=07615695-65d0-4dae-a6c2-9c2e5593eb9f, archive.name=07615695-65d0-4dae-a6c2-9c2e5593eb9f

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:183:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:183:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=04b1b1ad-cfd2-49cb-a469-05f9466864fa, archive.name=04b1b1ad-cfd2-49cb-a469-05f9466864fa

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:193:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:193:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=956f0ea5-c012-40a6-954a-581f433153eb, archive.name=956f0ea5-c012-40a6-954a-581f433153eb

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:202:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:202:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=89475ee3-7ffc-4466-850d-fc57578cfaa4, archive.name=89475ee3-7ffc-4466-850d-fc57578cfaa4

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:213:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:213:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=0e501e8d-f71d-466b-a70b-d4b73f3d5d08, archive.name=0e501e8d-f71d-466b-a70b-d4b73f3d5d08

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:220:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:220:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=96a43453-5e4c-4229-a559-c8534a100bb0, archive.name=96a43453-5e4c-4229-a559-c8534a100bb0

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:229:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:229:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=824ce5ea-1682-49eb-aae6-8f50586ae0c0, archive.name=824ce5ea-1682-49eb-aae6-8f50586ae0c0

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:240:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:240:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=027914c1-24a8-4e1e-8678-1cf9de8fb32d, archive.name=027914c1-24a8-4e1e-8678-1cf9de8fb32d

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:249:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:249:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=7d8f43d8-3250-4627-b1f4-78823dd92608, archive.name=7d8f43d8-3250-4627-b1f4-78823dd92608

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker processing failed for pics/test.pcx, falling back to main thread TypeError: _workerService.workerService.executeAssetProcessorTask is not a function
          at PakService.executeAssetProcessorTask [as parseFile] (/app/src/services/pakService.ts:400:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:251:22)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:251:22)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:257:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:257:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=d3ccdec5-6fdd-47bb-9a35-c8f0a1a0eb3b, archive.name=d3ccdec5-6fdd-47bb-9a35-c8f0a1a0eb3b

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker processing failed for models/test.md2, falling back to main thread TypeError: _workerService.workerService.executeAssetProcessorTask is not a function
          at PakService.executeAssetProcessorTask [as parseFile] (/app/src/services/pakService.ts:409:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:259:22)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:259:22)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:265:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:265:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=b574cf43-dfdf-4c69-b266-96917fdf8421, archive.name=b574cf43-dfdf-4c69-b266-96917fdf8421

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker processing failed for sprites/test.sp2, falling back to main thread TypeError: _workerService.workerService.executeAssetProcessorTask is not a function
          at PakService.executeAssetProcessorTask [as parseFile] (/app/src/services/pakService.ts:415:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:267:22)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:267:22)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:273:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:273:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=23464b5c-d577-4a6e-a7a6-a17968b5c66f, archive.name=23464b5c-d577-4a6e-a7a6-a17968b5c66f

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker processing failed for maps/test.bsp, falling back to main thread TypeError: _workerService.workerService.executeAssetProcessorTask is not a function
          at PakService.executeAssetProcessorTask [as parseFile] (/app/src/services/pakService.ts:421:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:275:22)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:275:22)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:281:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:281:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=8ab75349-1e8f-4b6a-bdff-4a4168ce563d, archive.name=8ab75349-1e8f-4b6a-bdff-4a4168ce563d

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:291:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:291:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=92c571db-93d2-4a45-89e8-3a51da427817, archive.name=92c571db-93d2-4a45-89e8-3a51da427817

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 5 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:302:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:302:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=6f061872-3950-47ba-a21e-56682911be68, archive.name=6f061872-3950-47ba-a21e-56682911be68

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 5 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:314:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:314:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=ffd49433-0d77-4feb-b4a9-9e0f14734c27, archive.name=ffd49433-0d77-4feb-b4a9-9e0f14734c27

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

PASS unit tests/unit/components/UniversalViewer/ViewerControls.extra.test.tsx
PASS unit tests/unit/modDetectionService.test.ts
PASS unit tests/unit/components/ModelInspector.test.tsx
PASS unit tests/unit/components/Toolbar.test.tsx
PASS unit tests/unit/components/Console.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts
  ● Console

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:141:19)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:161:19)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:187:19)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:218:19)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:252:21)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:272:21)

PASS unit tests/unit/components/SettingsPanel.test.tsx
PASS unit tests/unit/components/SaveLoadDialog.test.tsx
PASS unit tests/unit/components/DemoBookmarks.test.tsx
PASS unit tests/unit/components/settings/ControlsSettings.coverage.test.tsx
PASS unit tests/unit/components/DemoStats.config.test.tsx
PASS unit tests/unit/components/KeybindingEditor.test.tsx
PASS unit tests/unit/components/ScreenshotSettings.test.tsx
PASS unit tests/unit/adapters.debugMode.test.ts
PASS unit tests/unit/components/settings/GeneralSettings.coverage.test.tsx
PASS unit tests/unit/components/settings/CacheSettings.test.tsx
  ● Console

    console.error
      Error: Not implemented: navigation (except hash changes)
          at module.exports (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/not-implemented.js:9:17)
          at navigateFetch (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/window/navigation.js:77:3)
          at exports.navigate (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/window/navigation.js:55:3)
          at Timeout._onTimeout (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/nodes/HTMLHyperlinkElementUtils-impl.js:81:7)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7) {
        type: 'not implemented'
      }

      at VirtualConsole.<anonymous> (node_modules/jest-environment-jsdom/build/index.js:65:23)

PASS unit tests/unit/services/AssetCrossRefService.test.ts
PASS unit tests/unit/PreviewPanel/ModelPreview.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/Md3Adapter.coverage.test.ts
  ● Console

    console.warn
      Failed to load skin: Error: Load failed
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/adapters/Md3Adapter.coverage.test.ts:82:47)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      60 |           this.skinTextures.set(name, tex);
      61 |         } catch (e) {
    > 62 |           console.warn('Failed to load skin:', e);
         |                   ^
      63 |         }
      64 |       }
      65 |     });

      at warn (src/components/UniversalViewer/adapters/Md3Adapter.ts:62:19)
          at async Promise.all (index 0)
      at Md3Adapter.load (src/components/UniversalViewer/adapters/Md3Adapter.ts:67:5)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/adapters/Md3Adapter.coverage.test.ts:85:5)

PASS unit tests/unit/components/BspAnalyzerStats.test.tsx
PASS unit tests/unit/ResizablePanel.test.tsx
PASS unit tests/unit/components/LightmapInspector.test.tsx
PASS unit tests/unit/components/PostProcessSettings.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/BspAdapter.manipulation.test.ts
PASS unit tests/unit/workers/indexer.worker.test.ts
PASS unit tests/unit/components/LoadingScreen.test.tsx
PASS unit tests/unit/components/GameMenu.coverage.test.tsx
  ● Console

    console.error
      Error: Not implemented: navigation (except hash changes)
          at module.exports (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/not-implemented.js:9:17)
          at navigateFetch (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/window/navigation.js:77:3)
          at exports.navigate (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/window/navigation.js:55:3)
          at Timeout._onTimeout (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/nodes/HTMLHyperlinkElementUtils-impl.js:81:7)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7) {
        type: 'not implemented'
      }

      at VirtualConsole.<anonymous> (node_modules/jest-environment-jsdom/build/index.js:65:23)

PASS unit tests/unit/services/gameService.test.ts
PASS unit tests/unit/components/UniversalViewer/BspAdapter.branches.test.ts
PASS unit tests/unit/components/DemoBrowser.test.tsx
  ● Console

    console.error
      An update to DemoBrowser inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      31 |       setLoading(true);
      32 |       const list = await demoStorageService.getDemos();
    > 33 |       setDemos(list);
         |       ^
      34 |
      35 |       // Load all metadata
      36 |       const allMeta = demoMetadataService.getAllMetadata();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setDemos (src/components/DemoBrowser.tsx:33:7)

    console.error
      An update to DemoBrowser inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      39 |         metaMap[m.id] = m;
      40 |       });
    > 41 |       setMetadataMap(metaMap);
         |       ^
      42 |
      43 |     } catch (err) {
      44 |       setError(err instanceof Error ? err.message : 'Failed to load demos');

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setMetadataMap (src/components/DemoBrowser.tsx:41:7)

    console.error
      An update to DemoBrowser inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      44 |       setError(err instanceof Error ? err.message : 'Failed to load demos');
      45 |     } finally {
    > 46 |       setLoading(false);
         |       ^
      47 |     }
      48 |   };
      49 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setLoading (src/components/DemoBrowser.tsx:46:7)

PASS unit tests/unit/components/LightingControls.test.tsx
PASS unit tests/unit/components/BookmarkList.test.tsx
PASS unit tests/unit/components/settings/AudioSettings.coverage.test.tsx
PASS unit tests/unit/components/BookmarkDialog.test.tsx
PASS unit tests/unit/components/CameraSettingsPanel.test.tsx
PASS unit tests/unit/services/cacheService.coverage.test.ts
PASS unit tests/unit/services/pakService.coverage.test.ts
  ● Console

    console.warn
      Worker processing failed for models/test.md2, falling back to main thread Error: Worker Fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:164:54)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:170:24)

    console.warn
      Worker processing failed for models/test.md2, falling back to main thread Error: Worker Fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:179:54)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:184:24)

    console.warn
      Failed to parse MD2 file models/test.md2: Error: Fallback Fail
          at /app/tests/unit/services/pakService.coverage.test.ts:182:51
          at /app/node_modules/jest-mock/build/index.js:397:39
          at /app/node_modules/jest-mock/build/index.js:404:13
          at mockConstructor (/app/node_modules/jest-mock/build/index.js:148:19)
          at PakService.parseFileFallback (/app/src/services/pakService.ts:461:33)
          at PakService.parseFileFallback [as parseFile] (/app/src/services/pakService.ts:432:19)
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:184:24)

      464 |         } catch (e) {
      465 |           const error = e instanceof Error ? e.message : String(e);
    > 466 |           console.warn(`Failed to parse MD2 file ${path}:`, e);
          |                   ^
      467 |           return { type: 'unknown', data, error };
      468 |         }
      469 |       }

      at PakService.warn [as parseFileFallback] (src/services/pakService.ts:466:19)
      at PakService.parseFileFallback [as parseFile] (src/services/pakService.ts:432:19)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:184:24)

    console.log
      [PakService] buildFileTree called with mode=by-pak, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Building tree for pak pak1.pak (id=id1), found 1 files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:553:21)

    console.log
      [PakService] Cache hit for test.pak, creating WorkerPakArchive with pakId=e6209edd-1ede-4a5e-94fb-3a37de2058e8, archive.name=e6209edd-1ede-4a5e-94fb-3a37de2058e8

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:198:17)

    console.log
      [PakService] Worker parsed test.pak: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for test.pak, creating WorkerPakArchive with pakId=69218dbc-c12e-4af8-948f-d5054c6d65d1, archive.name=69218dbc-c12e-4af8-948f-d5054c6d65d1

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

PASS unit tests/unit/components/DemoMetadata.test.tsx
PASS unit tests/unit/PreviewPanel/HexPreview.test.tsx
PASS unit tests/unit/services/bookmarkService.test.ts
  ● Console

    console.error
      Failed to import bookmarks SyntaxError: Expected property name or '}' in JSON at position 2 (line 1 column 3)
          at JSON.parse (<anonymous>)
          at BookmarkService.parse [as importBookmarks] (/app/src/services/bookmarkService.ts:107:51)
          at importBookmarks (/app/tests/unit/services/bookmarkService.test.ts:158:27)
          at Object.<anonymous> (/app/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/app/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/app/tests/unit/services/bookmarkService.test.ts:158:71)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      146 |
      147 |     } catch (e) {
    > 148 |       console.error('Failed to import bookmarks', e);
          |               ^
      149 |       throw new Error('Failed to parse bookmark file');
      150 |     }
      151 |   }

      at BookmarkService.error [as importBookmarks] (src/services/bookmarkService.ts:148:15)
      at importBookmarks (tests/unit/services/bookmarkService.test.ts:158:27)
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/services/bookmarkService.test.ts:158:71)

    console.error
      Failed to import bookmarks Error: Invalid bookmark format: missing bookmarks array
          at BookmarkService.importBookmarks (/app/src/services/bookmarkService.ts:109:15)
          at importBookmarks (/app/tests/unit/services/bookmarkService.test.ts:163:26)
          at Object.<anonymous> (/app/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/app/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/app/tests/unit/services/bookmarkService.test.ts:163:64)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      146 |
      147 |     } catch (e) {
    > 148 |       console.error('Failed to import bookmarks', e);
          |               ^
      149 |       throw new Error('Failed to parse bookmark file');
      150 |     }
      151 |   }

      at BookmarkService.error [as importBookmarks] (src/services/bookmarkService.ts:148:15)
      at importBookmarks (tests/unit/services/bookmarkService.test.ts:163:26)
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/services/bookmarkService.test.ts:163:64)

    console.warn
      Clip extraction is not yet supported by the underlying library.

      167 |     // return DemoUtils.extractRange(demoBuffer, startFrame, endFrame);
      168 |
    > 169 |     console.warn('Clip extraction is not yet supported by the underlying library.');
          |             ^
      170 |     return null;
      171 |   }
      172 | }

      at BookmarkService.warn [as extractClip] (src/services/bookmarkService.ts:169:13)
      at Object.extractClip (tests/unit/services/bookmarkService.test.ts:168:34)

PASS unit tests/unit/services/PakService.coverage.test.ts
  ● Console

    console.log
      [PakService] Worker parsed [object ArrayBuffer]: { entriesType: 'object', isMap: false, size: 'N/A', keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.warn
      [PakService] Entries is not a Map, converting...

      216 |       let entries = result.entries;
      217 |       if (!(entries instanceof Map)) {
    > 218 |           console.warn('[PakService] Entries is not a Map, converting...');
          |                   ^
      219 |           if (typeof entries === 'object' && entries !== null) {
      220 |               entries = new Map(Object.entries(entries));
      221 |           } else {

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:218:19)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:48:9)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: Cannot read properties of undefined (reading 'catch')
          at PakService.loadPakInternal (/app/src/services/pakService.ts:229:71)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/app/tests/unit/services/PakService.coverage.test.ts:48:9)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:48:9)

    console.log
      [PakService] Fallback for [object ArrayBuffer], creating PakArchive with pakId=test-id, archive.name=undefined

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Cache lookup failed Error: Cache Error
          at Object.<anonymous> (/app/tests/unit/services/PakService.coverage.test.ts:55:59)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      201 |       }
      202 |     } catch (e) {
    > 203 |       console.warn('Cache lookup failed', e);
          |               ^
      204 |     }
      205 |
      206 |     try {

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:203:15)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:62:9)

    console.log
      [PakService] Worker parsed [object ArrayBuffer]: { entriesType: 'object', isMap: false, size: 'N/A', keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.warn
      [PakService] Entries is not a Map, converting...

      216 |       let entries = result.entries;
      217 |       if (!(entries instanceof Map)) {
    > 218 |           console.warn('[PakService] Entries is not a Map, converting...');
          |                   ^
      219 |           if (typeof entries === 'object' && entries !== null) {
      220 |               entries = new Map(Object.entries(entries));
      221 |           } else {

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:218:19)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:62:9)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: Cannot read properties of undefined (reading 'catch')
          at PakService.loadPakInternal (/app/src/services/pakService.ts:229:71)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/app/tests/unit/services/PakService.coverage.test.ts:62:9)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:62:9)

    console.log
      [PakService] Fallback for [object ArrayBuffer], creating PakArchive with pakId=test-id, archive.name=undefined

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread Error: Worker Error
          at Object.<anonymous> (/app/tests/unit/services/PakService.coverage.test.ts:70:77)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:72:9)

    console.log
      [PakService] Fallback for [object ArrayBuffer], creating PakArchive with pakId=test-id, archive.name=undefined

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] Worker parsed [object ArrayBuffer]: { entriesType: 'object', isMap: false, size: 'N/A', keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.warn
      [PakService] Entries is not a Map, converting...

      216 |       let entries = result.entries;
      217 |       if (!(entries instanceof Map)) {
    > 218 |           console.warn('[PakService] Entries is not a Map, converting...');
          |                   ^
      219 |           if (typeof entries === 'object' && entries !== null) {
      220 |               entries = new Map(Object.entries(entries));
      221 |           } else {

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:218:19)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:89:9)

    console.log
      [PakService] Worker success for [object ArrayBuffer], creating WorkerPakArchive with pakId=test-id, archive.name=test-id

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

    console.warn
      Failed to cache pak index Error: Set Error
          at Object.<anonymous> (/app/tests/unit/services/PakService.coverage.test.ts:83:59)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      228 |       if (hash) {
      229 |         cacheService.set(CACHE_STORES.PAK_INDEX, hash, result.entries).catch(e =>
    > 230 |           console.warn('Failed to cache pak index', e)
          |                   ^
      231 |         );
      232 |       }
      233 |

      at warn (src/services/pakService.ts:230:19)

    console.warn
      Worker processing failed for test.md2, falling back to main thread Error: Worker Error
          at Object.<anonymous> (/app/tests/unit/services/PakService.coverage.test.ts:93:82)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:102:24)

    console.warn
      Failed to parse MD2 file test.md2: TypeError: (0 , _engine.parseMd2) is not a function
          at PakService.parseFileFallback (/app/src/services/pakService.ts:461:33)
          at PakService.parseFileFallback [as parseFile] (/app/src/services/pakService.ts:432:19)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/app/tests/unit/services/PakService.coverage.test.ts:102:24)

      464 |         } catch (e) {
      465 |           const error = e instanceof Error ? e.message : String(e);
    > 466 |           console.warn(`Failed to parse MD2 file ${path}:`, e);
          |                   ^
      467 |           return { type: 'unknown', data, error };
      468 |         }
      469 |       }

      at PakService.warn [as parseFileFallback] (src/services/pakService.ts:466:19)
      at PakService.parseFileFallback [as parseFile] (src/services/pakService.ts:432:19)
      at Object.<anonymous> (tests/unit/services/PakService.coverage.test.ts:102:24)

PASS unit tests/unit/components/VideoSettings.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraSettings.test.ts
PASS unit tests/unit/services/cacheService.test.ts
PASS unit tests/unit/components/PakOrderManager.test.tsx
PASS unit tests/unit/DropZone.test.tsx
PASS unit tests/unit/components/UniversalViewer/ViewerControls.demoStepping.test.tsx
PASS unit tests/unit/services/videoRecorder.test.ts
PASS unit tests/unit/PreviewPanel/TextPreview.test.tsx
PASS unit tests/unit/services/pakService.fallback.test.ts
  ● Console

    console.warn
      Worker parsing failed, falling back to main thread Error: Worker crashed
          at Object.<anonymous> (/app/tests/unit/services/pakService.fallback.test.ts:65:77)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/services/pakService.fallback.test.ts:76:24)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=test-pak-id, archive.name=undefined

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

PASS unit tests/unit/gameService.test.ts
PASS unit tests/unit/utils/postProcessing.coverage.test.ts
PASS unit tests/unit/services/multiplayerGameService.test.ts
PASS unit tests/unit/components/GameHUD.coverage.test.tsx
PASS unit tests/unit/components/ServerBrowser.test.tsx
PASS unit tests/unit/services/multiplayerGameService.coverage.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/BspAdapter.extra.test.ts
PASS unit tests/unit/helpers.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/Md3Adapter.test.ts
PASS unit tests/unit/pakService.priority.test.ts
  ● Console

    console.log
      [PakService] Worker parsed mod.pak: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for mod.pak, creating WorkerPakArchive with pakId=mod, archive.name=mod

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

    console.log
      [PakService] Worker parsed base.pak: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for base.pak, creating WorkerPakArchive with pakId=base, archive.name=base

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

    console.log
      [PakService] Cache hit for mod.pak, creating WorkerPakArchive with pakId=mod, archive.name=mod

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:198:17)

    console.log
      [PakService] Cache hit for base.pak, creating WorkerPakArchive with pakId=base, archive.name=base

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:198:17)

    console.log
      [PakService] Worker parsed A: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for A, creating WorkerPakArchive with pakId=a, archive.name=a

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

    console.log
      [PakService] Worker parsed B: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for B, creating WorkerPakArchive with pakId=b, archive.name=b

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

PASS unit tests/unit/services/networkService.coverage.test.ts
PASS unit tests/unit/components/DemoStats.test.tsx
PASS unit tests/unit/components/BspAnalyzer.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/Md2Adapter.test.ts
PASS unit tests/unit/components/PerformanceStats.test.tsx
PASS unit tests/unit/utils/postProcessing.test.ts
PASS unit tests/unit/SpriteViewer.test.tsx
PASS unit tests/unit/components/GameMenu.test.tsx
PASS unit tests/unit/services/inputService.test.ts
PASS unit tests/unit/services/gameService.console.test.ts
PASS unit tests/unit/services/demoStorageService.coverage.test.ts
PASS unit tests/unit/components/ThemeSelector.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts
  ● Console

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

PASS unit tests/unit/components/EntityLegend.test.tsx
PASS unit tests/unit/services/workerService.coverage.test.ts
PASS unit tests/unit/adapters/BspAdapterLighting.test.ts
PASS unit tests/unit/services/themeService.test.ts
PASS unit tests/unit/workers/pakParser.worker.test.ts
PASS unit tests/unit/services/workerService.test.ts
PASS unit tests/unit/services/predictionService.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/BspAdapter_Extended.test.ts
PASS unit tests/unit/services/modelExportService.test.ts
PASS unit tests/unit/services/entityService.test.ts
  ● Console

    console.warn
      Failed to parse entities from maps/bad.bsp: Error: Parse error
          at /app/tests/unit/services/entityService.test.ts:88:47
          at /app/node_modules/jest-mock/build/index.js:397:39
          at /app/node_modules/jest-mock/build/index.js:404:13
          at mockConstructor (/app/node_modules/jest-mock/build/index.js:148:19)
          at EntityService.scanAllMaps (/app/src/services/entityService.ts:56:29)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/app/tests/unit/services/entityService.test.ts:90:21)

      60 |         allEntities.push(...mapEntities);
      61 |       } catch (err) {
    > 62 |         console.warn(`Failed to parse entities from ${bspPath}:`, err);
         |                 ^
      63 |       }
      64 |     }
      65 |

      at EntityService.warn [as scanAllMaps] (src/services/entityService.ts:62:17)
      at Object.<anonymous> (tests/unit/services/entityService.test.ts:90:21)

PASS unit tests/unit/utils/postProcessing.error.test.ts
PASS unit tests/unit/services/demoStorageService.test.ts
PASS unit tests/unit/utils/cameraUtils.test.ts
PASS unit tests/unit/services/inputService.coverage.test.ts
PASS unit tests/unit/utils/gameLoop.test.ts
PASS unit tests/unit/components/SurfaceFlags.test.tsx
PASS unit tests/unit/utils/collisionAdapter.coverage.test.ts
PASS unit tests/unit/services/settingsService.test.ts
PASS unit tests/unit/services/consoleService.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/GizmoRenderer.test.ts
PASS unit tests/unit/components/BspOptimizationTab.test.tsx
PASS unit tests/unit/services/indexedDBService.coverage.test.ts
PASS unit tests/unit/components/CameraSettingsPanel.cinematic.test.tsx
PASS unit tests/unit/utils/cameraPath.test.ts
PASS unit tests/unit/services/screenshotService.test.ts
PASS unit tests/unit/components/UniversalViewer/ViewerControls.integration.test.tsx
PASS unit tests/unit/services/videoRecorder.coverage.test.ts
  ● Console

    console.error
      Failed to start recording: Error: Init Fail
          at mockConstructor.<anonymous> (/app/tests/unit/services/videoRecorder.coverage.test.ts:61:17)
          at /app/node_modules/jest-mock/build/index.js:387:43
          at mockConstructor.<anonymous> (/app/node_modules/jest-mock/build/index.js:404:13)
          at new mockConstructor (/app/node_modules/jest-mock/build/index.js:148:19)
          at VideoRecorderService.startRecording (/app/src/services/videoRecorder.ts:44:28)
          at startRecording (/app/tests/unit/services/videoRecorder.coverage.test.ts:64:28)
          at Object.<anonymous> (/app/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/app/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/app/tests/unit/services/videoRecorder.coverage.test.ts:64:56)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      57 |       this.isRecordingState = true;
      58 |     } catch (error) {
    > 59 |       console.error('Failed to start recording:', error);
         |               ^
      60 |       throw new Error(`Failed to start recording: ${error instanceof Error ? error.message : String(error)}`);
      61 |     }
      62 |   }

      at VideoRecorderService.error [as startRecording] (src/services/videoRecorder.ts:59:15)
      at startRecording (tests/unit/services/videoRecorder.coverage.test.ts:64:28)
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/services/videoRecorder.coverage.test.ts:64:56)

PASS unit tests/unit/utils/cameraUtils.coverage.test.ts
PASS unit tests/unit/utils/WorkerPakArchive.test.ts
PASS unit tests/unit/inputService.bindings.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/DebugRenderer.test.ts
PASS unit tests/unit/components/EntityMetadata.test.tsx
PASS unit tests/unit/components/PerformanceGraph.test.tsx
PASS unit tests/unit/services/saveService.coverage.test.ts
PASS unit tests/unit/components/SpeedGraph.test.tsx
PASS unit tests/unit/saveService.test.ts
PASS unit tests/unit/services/performanceService.test.ts
  ● Console

    console.warn
      Failed to measure invalid-op: Error: Invalid mark
          at Object.<anonymous> (/app/tests/unit/services/performanceService.test.ts:86:19)
          at /app/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/app/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as measure] (/app/node_modules/jest-mock/build/index.js:148:19)
          at Object.measure [as endMeasure] (/app/src/services/performanceService.ts:78:29)
          at endMeasure (/app/tests/unit/services/performanceService.test.ts:91:32)
          at Object.<anonymous> (/app/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/app/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/app/tests/unit/services/performanceService.test.ts:92:16)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      80 |         } catch (e) {
      81 |             // Ignore errors if marks are missing (e.g. if startMeasure wasn't called)
    > 82 |             console.warn(`Failed to measure ${name}:`, e);
         |                     ^
      83 |         }
      84 |     }
      85 | };

      at Object.warn [as endMeasure] (src/services/performanceService.ts:82:21)
      at endMeasure (tests/unit/services/performanceService.test.ts:91:32)
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/services/performanceService.test.ts:92:16)

PASS unit tests/unit/utils/surfaceFlagParser.test.ts
PASS unit tests/unit/services/thumbnailService.coverage.test.ts
PASS unit tests/unit/services/keybindingService.test.ts
PASS unit tests/unit/services/demoRecorder.test.ts
  ● Console

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

    console.warn
      Already recording demo

      20 |   public startRecording(filename: string): void {
      21 |     if (this.isRecording()) {
    > 22 |       console.warn('Already recording demo');
         |               ^
      23 |       return;
      24 |     }
      25 |

      at DemoRecorderService.warn [as startRecording] (src/services/demoRecorder.ts:22:15)
      at Object.startRecording (tests/unit/services/demoRecorder.test.ts:45:27)

    console.warn
      Already recording demo

      20 |   public startRecording(filename: string): void {
      21 |     if (this.isRecording()) {
    > 22 |       console.warn('Already recording demo');
         |               ^
      23 |       return;
      24 |     }
      25 |

      at DemoRecorderService.warn [as startRecording] (src/services/demoRecorder.ts:22:15)
      at Object.startRecording (tests/unit/services/demoRecorder.test.ts:50:27)

    console.log
      Saved demo test.dm2 to storage (3 bytes)

      at DemoRecorderService.log [as stopRecording] (src/services/demoRecorder.ts:46:17)

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

PASS unit tests/unit/types/enums.test.ts
PASS unit tests/unit/components/WaveformCanvas.test.tsx
PASS unit tests/unit/workers/assetProcessor.worker.coverage.test.ts
PASS unit tests/unit/utils/cameraPath.extra.test.ts
PASS unit tests/unit/utils/transformUtils.test.ts
PASS unit tests/unit/components/FrequencySpectrum.test.tsx
PASS unit tests/unit/utils/sp2Parser.test.ts
PASS unit tests/unit/services/videoRecorder.error.test.ts
PASS unit tests/unit/services/demoMetadataService.test.ts
PASS unit tests/unit/utils/gameLoop.extra.test.ts
PASS unit tests/unit/utils/cameraUtils.extra.test.ts
PASS unit tests/unit/entityEditorService.test.ts
PASS unit tests/unit/utils/gameLoop.coverage.test.ts
PASS unit tests/unit/services/demoRecorder.coverage.test.ts
  ● Console

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

PASS unit tests/unit/services/consoleService.extra.test.ts

  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Saved demo test.dm2 to storage (10 bytes)".

      44 |       try {
      45 |         await demoStorageService.saveDemo(filename, data);
    > 46 |         console.log(`Saved demo ${filename} to storage (${data.length} bytes)`);
         |                 ^
      47 |       } catch (err) {
      48 |         console.error('Failed to auto-save demo:', err);
      49 |       }

      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)
      at DemoRecorderService.log [as stopRecording] (src/services/demoRecorder.ts:46:17)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Saved demo test.dm2 to storage (10 bytes)".

      44 |       try {
      45 |         await demoStorageService.saveDemo(filename, data);
    > 46 |         console.log(`Saved demo ${filename} to storage (${data.length} bytes)`);
         |                 ^
      47 |       } catch (err) {
      48 |         console.error('Failed to auto-save demo:', err);
      49 |       }

      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)
      at DemoRecorderService.log [as stopRecording] (src/services/demoRecorder.ts:46:17)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Saved demo test.dm2 to storage (10 bytes)".

      44 |       try {
      45 |         await demoStorageService.saveDemo(filename, data);
    > 46 |         console.log(`Saved demo ${filename} to storage (${data.length} bytes)`);
         |                 ^
      47 |       } catch (err) {
      48 |         console.error('Failed to auto-save demo:', err);
      49 |       }

      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)
      at DemoRecorderService.log [as stopRecording] (src/services/demoRecorder.ts:46:17)

PASS unit tests/unit/components/FrameInfo.test.tsx
PASS unit tests/unit/services/assetCrossRefService.coverage.test.ts
PASS unit tests/unit/utils/camera.test.ts
-----------------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File                                     | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s
-----------------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
All files                                |   83.85 |    69.78 |   84.32 |   85.84 |
 src                                     |   79.01 |    58.53 |   71.42 |   78.48 |
  App.tsx                                |   79.01 |    58.53 |   71.42 |   78.48 | 38-39,104-106,121,127,133,140,146-152,235-240,263,277,286-287,291-296,309,325,327,340-351,386-387
 src/components                          |   81.84 |    72.46 |   83.13 |   83.76 |
  BookmarkDialog.tsx                     |     100 |     92.3 |     100 |     100 | 43
  BookmarkList.tsx                       |   94.73 |     62.5 |    87.5 |   94.73 | 24
  BspAnalyzer.tsx                        |   78.94 |    65.47 |   79.16 |   79.71 | 96-123,150,398-400,410,440
  BspOptimizationTab.tsx                 |   92.98 |       80 |     100 |     100 | 20,66-71,89,116
  CameraSettingsPanel.tsx                |   66.66 |      100 |   57.14 |   66.66 | 57-83
  Console.tsx                            |   98.33 |    86.11 |     100 |   98.24 | 81
  DemoBookmarks.tsx                      |   63.88 |    57.14 |    62.5 |   62.85 | 36-38,81,85-86,90-99,103-116
  DemoBrowser.tsx                        |    83.9 |    80.76 |    90.9 |   83.54 | 44,103,108-116,122,208
  DemoMetadata.tsx                       |   86.36 |    79.06 |      90 |   91.17 | 50,64,129
  DemoStats.tsx                          |   91.76 |    88.23 |   95.45 |   93.67 | 60,138-140,226
  DemoTimeline.tsx                       |   82.47 |    64.16 |   86.66 |   86.03 | 19-23,173-176,189-191,199-200,209-210,222-228,253,279,311-312
  DropZone.tsx                           |     100 |    83.33 |     100 |     100 | 16-26
  EntityDatabase.tsx                     |      82 |       86 |   83.33 |   83.33 | 68,125,133-134,179,189-195,222-231,256
  EntityInspector.tsx                    |   88.88 |      100 |   66.66 |   88.88 | 26
  EntityLegend.tsx                       |     100 |      100 |     100 |     100 |
  EntityMetadata.tsx                     |     100 |       75 |     100 |     100 | 21
  FrameInfo.tsx                          |   94.44 |     62.5 |     100 |     100 | 15-19
  FrequencySpectrum.tsx                  |   81.13 |    59.09 |   85.71 |   84.78 | 29-31,83-86
  GameHUD.tsx                            |   95.65 |    92.85 |      75 |     100 | 70
  GameMenu.tsx                           |     100 |       90 |     100 |     100 | 64
  KeybindingEditor.tsx                   |   64.55 |    63.46 |   84.21 |   66.66 | 32-34,45-49,61-83,102-104,193
  LightingControls.tsx                   |   83.33 |      100 |      75 |   81.81 | 57-69
  LightmapInspector.tsx                  |    67.2 |    61.11 |   84.61 |   68.37 | 37,43,110-151,156,202-213
  LoadingScreen.tsx                      |     100 |      100 |     100 |     100 |
  MetadataPanel.tsx                      |   93.93 |    78.26 |     100 |   93.33 | 127,233
  ModelInspector.tsx                     |   84.93 |    65.38 |   85.71 |   84.05 | 29-35,74-77,97-98
  PakOrderManager.tsx                    |   75.36 |     62.5 |      75 |   76.19 | 50-52,159-160,165-169,173-181
  PerformanceGraph.tsx                   |      96 |    83.33 |     100 |     100 | 14-16
  PerformanceStats.tsx                   |      90 |    93.33 |     100 |     100 | 18,100
  PostProcessSettings.tsx                |     100 |      100 |     100 |     100 |
  PreviewPanel.tsx                       |   83.87 |    72.22 |   85.71 |   83.33 | 81,115,157-161,173
  ResizablePanel.tsx                     |   63.15 |    77.41 |    62.5 |   64.86 | 35-38,43-50,54,58-61
  SaveLoadDialog.tsx                     |   81.48 |     72.5 |   92.85 |   81.63 | 33,45-46,52-53,63,73-74,131
  ScreenshotSettings.tsx                 |     100 |      100 |     100 |     100 |
  ServerBrowser.tsx                      |   71.05 |    81.48 |   66.66 |   72.22 | 55-68,109,162
  SettingsPanel.tsx                      |   63.46 |    51.72 |      50 |   63.26 | 75-110,115,146-174
  SoundAnalyzer.tsx                      |   87.86 |    61.97 |    90.9 |   90.18 | 77,97-120,143,384
  SpeedGraph.tsx                         |   94.87 |       80 |     100 |     100 | 20-22,56
  SpriteViewer.tsx                       |   93.22 |    80.76 |      90 |      98 | 113
  SurfaceFlags.tsx                       |     100 |    91.66 |     100 |     100 | 56
  TextureAtlas.tsx                       |      64 |     59.8 |   58.62 |   68.36 | 79,140-163,172-173,238-245,249-252,258-271,275-294,315,405,453-460
  ThemeSelector.tsx                      |     100 |       50 |     100 |     100 | 24
  Toolbar.tsx                            |   95.45 |    96.42 |    87.5 |   95.23 | 43
  UserDisplay.tsx                        |     100 |      100 |     100 |     100 |
  VideoSettings.tsx                      |   83.33 |    83.33 |      75 |    82.6 | 29-30,89-100
  WaveformCanvas.tsx                     |   84.61 |    67.74 |      80 |   88.88 | 80-81,107-110
 src/components/FileTree                 |   53.02 |    44.61 |   52.94 |   52.85 |
  FileSearch.tsx                         |   36.84 |       16 |   35.29 |   36.53 | 11-27,45-47,65,70-71,75-76,82-96,108-121
  index.tsx                              |   63.04 |     62.5 |   70.58 |    62.5 | 40-44,49,69-75,81-83,145,191-218,224-226
 src/components/UniversalViewer          |   71.06 |     63.1 |   64.46 |   73.49 |
  UniversalViewer.tsx                    |   67.65 |    57.72 |   58.69 |   69.96 | 64-67,156-162,185,196-203,216,231,280-282,291-292,302-303,332,339-340,350-351,358,362-394,399-435,453-455,476-478,501,543,562-567,589-591,642-643,682-683,689-690,695-696,720,809,818-839,872-906,943-944,1031-1036,1063-1071,1092,1108-1109,1124,1137,1155,1163,1192,1215-1222,1243-1279,1317-1318,1333-1417
  ViewerControls.tsx                     |   93.51 |       92 |   82.75 |   95.28 | 225,227-229,373
 src/components/UniversalViewer/adapters |   85.66 |    66.14 |   88.99 |   88.39 |
  BspAdapter.ts                          |    83.1 |    69.31 |   87.87 |    87.9 | 167,308,315-325,426,435,515-516,521-525,534-535,588-598,674-676,678-680,697-704,729,734
  DebugRenderer.ts                       |   98.79 |    94.11 |     100 |     100 | 62
  Dm2Adapter.ts                          |   85.71 |    58.82 |   84.21 |   88.35 | 80-82,142-153,190-199,233-234,307
  GizmoRenderer.ts                       |   73.68 |    43.51 |   63.63 |    73.4 | 154-156,162-170,197-214,223-226,249-250,257-258,269-307
  Md2Adapter.ts                          |   92.24 |    72.54 |   94.44 |   95.65 | 63,87-88,203,244
  Md3Adapter.ts                          |   99.19 |    90.47 |     100 |   99.15 | 74
  bspAdapterTypes.ts                     |       0 |        0 |       0 |       0 |
  types.ts                               |       0 |        0 |       0 |       0 |
 src/components/settings                 |   88.88 |     60.6 |   96.87 |   91.91 |
  AccessibilitySettings.tsx              |     100 |      100 |     100 |     100 |
  AdvancedSettings.tsx                   |   82.85 |      100 |   84.61 |   82.35 | 41-42,49-50,57-58
  AudioSettings.tsx                      |     100 |      100 |     100 |     100 |
  CacheSettings.tsx                      |   83.87 |    58.06 |     100 |   91.07 | 38-39,50-51,69
  ControlsSettings.tsx                   |     100 |      100 |     100 |     100 |
  GeneralSettings.tsx                    |     100 |      100 |     100 |     100 |
  GraphicsSettings.tsx                   |     100 |      100 |     100 |     100 |
 src/config                              |     100 |      100 |     100 |     100 |
  defaultBindings.ts                     |     100 |      100 |     100 |     100 |
 src/hooks                               |   92.43 |    67.56 |      96 |   93.33 |
  usePakExplorer.ts                      |   92.43 |    67.56 |      96 |   93.33 | 111-112,151,174,208,237,267-271,282,325-326
 src/services                            |   87.66 |    73.72 |   87.98 |   90.04 |
  assetCrossRefService.ts                |   87.96 |    70.58 |   93.33 |   89.58 | 90,116-131,186,215
  authService.ts                         |      50 |    16.66 |   33.33 |      50 | 35,54-71,83
  bookmarkService.ts                     |   95.38 |       88 |     100 |      95 | 46-47,120
  cacheService.ts                        |   89.58 |    76.31 |   83.72 |   95.93 | 38,173-175,220
  consoleService.ts                      |   93.24 |    72.41 |     100 |   97.01 | 99,122
  demoMetadataService.ts                 |    92.5 |    76.47 |     100 |    92.3 | 26,48,65
  demoRecorder.ts                        |   87.09 |       75 |   85.71 |   87.09 | 34-35,48,66
  demoStorageService.ts                  |   89.58 |    75.86 |   85.18 |     100 | 20-39,52,89,109,124,139
  entityEditorService.ts                 |   97.36 |    76.92 |     100 |   97.05 | 57
  entityService.ts                       |   95.83 |    74.19 |     100 |   97.77 | 147
  gameService.ts                         |   84.21 |    75.53 |   72.97 |   86.01 | 113,151-153,170,262-266,305,390-393,413,468,478,498,518-520,541
  indexedDBService.ts                    |   89.23 |    72.22 |   84.21 |     100 | 33,45,84-99
  inputService.ts                        |      92 |    78.57 |     100 |     100 | 26,40-62
  keybindingService.ts                   |   64.55 |    41.17 |   68.18 |   63.07 | 74-77,101,151-153,175-219,229
  modDetectionService.ts                 |   87.87 |    72.72 |     100 |   87.87 | 53,59,91,114
  modelExportService.ts                  |   94.91 |     62.5 |     100 |   98.14 | 17
  multiplayerGameService.ts              |      88 |    93.05 |    87.5 |   91.66 | 45,57,169-170
  networkService.ts                      |   88.83 |    67.77 |   89.65 |   88.94 | 71,123,136,144-147,209,274-275,277,279,286-293,303-304,326-328,369,436
  pakService.ts                          |   75.97 |    63.76 |   76.59 |    78.7 | 222-223,264-265,276,288,306,401-407,412-413,416-419,422-424,427,444-457,471-477,485-491,498-505,512,547-548,556-559,656-660
  performanceService.ts                  |    91.3 |       88 |    90.9 |      95 | 29,57
  predictionService.ts                   |   96.42 |    92.85 |     100 |   96.15 | 86
  protocolConstants.ts                   |     100 |      100 |     100 |     100 |
  saveService.ts                         |   91.89 |    81.25 |     100 |   91.42 | 39,53,78
  screenshotService.ts                   |   96.36 |     86.2 |     100 |   96.15 | 29,54
  settingsService.ts                     |    92.1 |    84.61 |     100 |   91.66 | 24,35,71
  themeService.ts                        |     100 |     87.5 |     100 |     100 | 41
  thumbnailService.ts                    |     100 |      100 |     100 |     100 |
  videoRecorder.ts                       |   95.74 |    89.65 |    87.5 |   95.74 | 34,80
  workerService.ts                       |     100 |       75 |     100 |     100 | 106-165
 src/themes                              |     100 |      100 |     100 |     100 |
  darkTheme.ts                           |     100 |      100 |     100 |     100 |
  highContrastTheme.ts                   |     100 |      100 |     100 |     100 |
  lightTheme.ts                          |     100 |      100 |     100 |     100 |
 src/types                               |     100 |      100 |     100 |     100 |
  CameraSettings.ts                      |     100 |      100 |     100 |     100 |
  modInfo.ts                             |     100 |      100 |     100 |     100 |
  settings.ts                            |     100 |      100 |     100 |     100 |
 src/utils                               |   98.29 |    85.14 |     100 |   98.82 |
  WorkerPakArchive.ts                    |   90.47 |       75 |     100 |      90 | 39-40
  camera.ts                              |     100 |      100 |     100 |     100 |
  cameraPath.ts                          |     100 |     87.5 |     100 |     100 | 101-107,114
  cameraUtils.ts                         |     100 |       75 |     100 |     100 | 33-35,188
  collisionAdapter.ts                    |     100 |       84 |     100 |     100 | 50,76-86
  gameLoop.ts                            |     100 |    76.92 |     100 |     100 | 51,66-76
  helpers.ts                             |   93.61 |    88.88 |     100 |   93.02 | 32,85,91
  postProcessing.ts                      |   98.19 |    80.48 |     100 |     100 | 88-99,112,169-170,190-200
  sp2Parser.ts                           |     100 |      100 |     100 |     100 |
  surfaceFlagParser.ts                   |     100 |      100 |     100 |     100 |
  transformUtils.ts                      |   96.66 |     87.5 |     100 |     100 | 52
 src/workers                             |   98.18 |    80.59 |     100 |   98.14 |
  assetProcessor.worker.ts               |     100 |       80 |     100 |     100 | 37-42
  indexer.worker.ts                      |   96.96 |     80.7 |     100 |   96.87 | 79-80
  pakParser.worker.ts                    |     100 |      100 |     100 |     100 |
-----------------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Jest: "global" coverage threshold for branches (70%) not met: 69.78%
Jest: "global" coverage threshold for functions (85%) not met: 84.32%

Test Suites: 170 passed, 170 total
Tests:       1097 passed, 1097 total
Snapshots:   0 total
Time:        53.878 s, estimated 95 s
Ran all test suites.
