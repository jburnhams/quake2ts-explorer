
> quake2ts-explorer@0.1.0 test:coverage
> NODE_OPTIONS='--max-old-space-size=2048' jest --config jest.unit.config.js --coverage --runInBand

PASS unit tests/unit/services/networkService.test.ts
PASS unit tests/unit/App.test.tsx
  ● Console

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: TypeError: file.arrayBuffer is not a function
          at PakService.arrayBuffer (/app/src/services/pakService.ts:168:31)
          at loadPakFile (/app/src/hooks/usePakExplorer.ts:178:36)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: TypeError: file.arrayBuffer is not a function
          at PakService.arrayBuffer (/app/src/services/pakService.ts:168:31)
          at loadPakFile (/app/src/hooks/usePakExplorer.ts:178:36)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: TypeError: file.arrayBuffer is not a function
          at PakService.arrayBuffer (/app/src/services/pakService.ts:168:31)
          at PakService.<anonymous> (/app/node_modules/jest-mock/build/index.js:794:25)
          at /app/node_modules/jest-mock/build/index.js:397:39
          at PakService.<anonymous> (/app/node_modules/jest-mock/build/index.js:404:13)
          at PakService.mockConstructor (/app/node_modules/jest-mock/build/index.js:148:19)
          at loadPakFile (/app/src/hooks/usePakExplorer.ts:178:36)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

PASS unit tests/unit/services/screenshotService.burst.test.ts
PASS unit tests/unit/pakService.real.test.ts
  ● Console

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:58:23)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:58:23)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=cb9d6b04-b282-4150-a626-9615418809c0, archive.name=cb9d6b04-b282-4150-a626-9615418809c0

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:64:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:64:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=886b0f3a-51e3-4aa5-960d-5c0bcfed595e, archive.name=886b0f3a-51e3-4aa5-960d-5c0bcfed595e

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:76:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:76:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=d7b5dd26-4d40-4fd4-8c1e-56d9f987d7cb, archive.name=d7b5dd26-4d40-4fd4-8c1e-56d9f987d7cb

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:76:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:76:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=1fc87a66-7905-4a15-b488-0a4d49228eaf, archive.name=1fc87a66-7905-4a15-b488-0a4d49228eaf

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=0fa14572-4fdb-47bf-b2b4-a1a2436c8780, archive.name=0fa14572-4fdb-47bf-b2b4-a1a2436c8780

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=e8316f8e-3770-4997-9b47-d8f395bda404, archive.name=e8316f8e-3770-4997-9b47-d8f395bda404

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=d209fd62-6106-4621-a897-a7f7e5fedcb2, archive.name=d209fd62-6106-4621-a897-a7f7e5fedcb2

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=1fd3586e-0280-4df2-b81e-9e500fe4f881, archive.name=1fd3586e-0280-4df2-b81e-9e500fe4f881

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=bd63cc8f-8da9-4d43-b650-e2e4fe09aeb9, archive.name=bd63cc8f-8da9-4d43-b650-e2e4fe09aeb9

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=1843fb21-4467-46be-a084-b5c13dfe7b94, archive.name=1843fb21-4467-46be-a084-b5c13dfe7b94

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=f5a39047-06e0-4aba-9b2c-c847f7fb3035, archive.name=f5a39047-06e0-4aba-9b2c-c847f7fb3035

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:96:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:96:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=9dd45a7a-8fda-4693-abfc-cfa9d46a0915, archive.name=9dd45a7a-8fda-4693-abfc-cfa9d46a0915

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=411a36c0-1cf1-47e4-8ea5-9d6ac7cb1460, archive.name=411a36c0-1cf1-47e4-8ea5-9d6ac7cb1460

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=368fc4ed-8deb-4127-bd0a-658de1695c0f, archive.name=368fc4ed-8deb-4127-bd0a-658de1695c0f

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=a289c425-2e6a-427f-b085-a51b1f50efb6, archive.name=a289c425-2e6a-427f-b085-a51b1f50efb6

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=98ddff11-61fb-47ec-ad9e-ba27cb1c3e3e, archive.name=98ddff11-61fb-47ec-ad9e-ba27cb1c3e3e

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=55b878b6-8af4-4e0e-b30a-3de07e53d42d, archive.name=55b878b6-8af4-4e0e-b30a-3de07e53d42d

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:198:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:198:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=f5ebe9b2-a873-4a93-a57c-a414a1902f6a, archive.name=f5ebe9b2-a873-4a93-a57c-a414a1902f6a

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:239:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:239:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=cbb0cf59-afb8-4cce-8bd5-d0b42c70cb60, archive.name=cbb0cf59-afb8-4cce-8bd5-d0b42c70cb60

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.real.test.ts:247:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.real.test.ts:247:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=5605bc27-887a-4ff3-8301-d1a9fca944dd, archive.name=5605bc27-887a-4ff3-8301-d1a9fca944dd

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 21 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

PASS unit tests/unit/hooks/usePakExplorer.test.tsx
  ● Console

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=by-pak

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.error
      Failed to start game mode: Error: Game init failed
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:272:63)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      360 |       // Only handle error if this request is still active
      361 |       if (requestId === activeGameRequestRef.current) {
    > 362 |           console.error("Failed to start game mode:", err);
          |                   ^
      363 |           setError(err instanceof Error ? err.message : 'Failed to start game mode');
      364 |           stopGameMode();
      365 |       }

      at Object.error [as startGameMode] (src/hooks/usePakExplorer.ts:362:19)
      at tests/unit/hooks/usePakExplorer.test.tsx:295:13

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.warn
      Skipping pak.pak because content-type is text/html

      141 |                 const type = res.headers.get('content-type');
      142 |                 if (type && type.toLowerCase().includes('text/html')) {
    > 143 |                     console.warn(`Skipping ${url} because content-type is text/html`);
          |                             ^
      144 |                     continue;
      145 |                 }
      146 |                 const buffer = await res.arrayBuffer();

      at warn (src/hooks/usePakExplorer.ts:143:29)
      at init (src/hooks/usePakExplorer.ts:164:15)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.warn
      Failed to load pak-manifest.json, skipping built-in paks.

      132 |         }
      133 |     } catch (e) {
    > 134 |         console.warn("Failed to load pak-manifest.json, skipping built-in paks.");
          |                 ^
      135 |     }
      136 |
      137 |     for (const url of paksToLoad) {

      at warn (src/hooks/usePakExplorer.ts:134:17)
      at init (src/hooks/usePakExplorer.ts:164:15)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.error
      Initialization error: Error: DB Error
          at Object.<anonymous> (/app/tests/unit/hooks/usePakExplorer.test.tsx:187:67)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      182 |           } catch (err) {
      183 |                if (err instanceof Error && err.name === 'AbortError') return;
    > 184 |                console.error("Initialization error:", err);
          |                        ^
      185 |                setError("Failed to initialize application data");
      186 |           } finally {
      187 |                if (!controller.signal.aborted) {

      at error (src/hooks/usePakExplorer.ts:184:24)

PASS unit tests/unit/components/SoundAnalyzer.coverage.test.tsx
PASS unit tests/unit/services/multiplayerGameService.test.ts
PASS unit tests/unit/components/DemoTimeline.coverage.test.tsx
PASS unit tests/unit/components/TextureAtlas.test.tsx
PASS unit tests/unit/components/ServerBrowser.integration.test.tsx
PASS unit tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx
  ● Console

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:61:15)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:61:15)

    console.error
      An update to UniversalViewer inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      726 |                  performanceService.endMeasure('asset-load');
      727 |
    > 728 |                  setAdapter(newAdapter);
          |                  ^
      729 |                  if (onAdapterReady) {
      730 |                      onAdapterReady(newAdapter);
      731 |                  }

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setAdapter (src/components/UniversalViewer/UniversalViewer.tsx:728:18)

    console.error
      An update to UniversalViewer inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      755 |              } else {
      756 |                  // Models
    > 757 |                  setCameraMode('orbit');
          |                  ^
      758 |                  setOrbit({
      759 |                     radius: 100,
      760 |                     theta: 0,

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setCameraMode (src/components/UniversalViewer/UniversalViewer.tsx:757:18)

    console.error
      An update to UniversalViewer inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      756 |                  // Models
      757 |                  setCameraMode('orbit');
    > 758 |                  setOrbit({
          |                  ^
      759 |                     radius: 100,
      760 |                     theta: 0,
      761 |                     phi: Math.PI / 4,

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setOrbit (src/components/UniversalViewer/UniversalViewer.tsx:758:18)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:119:16)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:119:16)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:162:16)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:162:16)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:207:16)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerBranchCoverage.test.tsx:207:16)

PASS unit tests/unit/usePakExplorer.test.ts
  ● Console

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.handleFileSelect (/app/src/hooks/usePakExplorer.ts:92:13)
          at /app/tests/unit/usePakExplorer.test.ts:163:7

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.handleFileSelect (src/hooks/usePakExplorer.ts:92:13)
      at tests/unit/usePakExplorer.test.ts:163:7

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=mock-id, archive.name=mock-id

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 1 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=1, fileCount=1

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 0

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 0 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=0, fileCount=0

      at log (src/hooks/usePakExplorer.ts:73:13)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.loadFromUrl (/app/src/hooks/usePakExplorer.ts:231:9)
          at /app/tests/unit/usePakExplorer.test.ts:202:7

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.loadFromUrl (src/hooks/usePakExplorer.ts:231:9)
      at tests/unit/usePakExplorer.test.ts:202:7

    console.log
      [PakService] Fallback for default.pak, creating PakArchive with pakId=a4bac906-763e-4b44-a824-a50c7bc224aa, archive.name=a4bac906-763e-4b44-a824-a50c7bc224aa

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [usePakExplorer] updateTreeAndCounts called with viewMode=merged

      at log (src/hooks/usePakExplorer.ts:66:13)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.log
      [usePakExplorer] tree built, root has 1 children

      at log (src/hooks/usePakExplorer.ts:68:13)

    console.log
      [usePakExplorer] Updated: pakCount=1, fileCount=1

      at log (src/hooks/usePakExplorer.ts:73:13)

PASS unit tests/unit/components/GameHUD.test.tsx
PASS unit tests/unit/components/UniversalViewer/UniversalViewerDemoStats.test.tsx
  ● Console

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

PASS unit tests/unit/components/DemoTimeline.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/GizmoRenderer.test.ts
PASS unit tests/unit/components/UniversalViewer/UniversalViewerScreenshot.test.tsx
  ● Console

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

PASS unit tests/unit/components/UniversalViewer.test.tsx
  ● Console

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:155:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:155:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:173:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:173:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:204:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:204:13)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at load (src/components/UniversalViewer/UniversalViewer.tsx:725:35)
      at initAdapter (src/components/UniversalViewer/UniversalViewer.tsx:773:6)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:204:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:221:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:221:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:245:13)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:245:13)

    console.error
      Failed to init post processor: Error: Failed to create shader
          at PostProcessor.compileShader (/app/src/utils/postProcessing.ts:175:28)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer.test.tsx:266:34)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer.test.tsx:266:34)

PASS unit tests/unit/components/settings/AdvancedSettings.coverage.test.tsx
  ● Console

    console.error
      Failed to clear cache Error: Fail
          at Object.<anonymous> (/app/tests/unit/components/settings/AdvancedSettings.coverage.test.tsx:106:60)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      19 |       alert('Cache cleared successfully.');
      20 |     } catch (e) {
    > 21 |       console.error('Failed to clear cache', e);
         |               ^
      22 |       alert('Failed to clear cache.');
      23 |     }
      24 |   };

      at error (src/components/settings/AdvancedSettings.tsx:21:15)

    console.log
      Deleted database Quake2TS

      at log (src/components/settings/AdvancedSettings.tsx:45:29)
          at Array.map (<anonymous>)

    console.log
      Deleted database Quake2TS-Saves

      at log (src/components/settings/AdvancedSettings.tsx:45:29)
          at Array.map (<anonymous>)

    console.log
      Deleted database Quake2TS-Demos

      at log (src/components/settings/AdvancedSettings.tsx:45:29)
          at Array.map (<anonymous>)

    console.log
      Deleted database quake2ts-cache

      at log (src/components/settings/AdvancedSettings.tsx:45:29)
          at Array.map (<anonymous>)

PASS unit tests/unit/components/UniversalViewer/ViewerControls.test.tsx

  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Failed to cache thumbnail TypeError: Cannot read properties of undefined (reading 'createElement')
        at ThumbnailService.generateThumbnail (/app/src/services/thumbnailService.ts:460:40)
        at cacheThumbnail (/app/src/components/TextureAtlas.tsx:4915:28)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)".



      at ThumbnailService.generateThumbnail (src/services/thumbnailService.ts:460:40)
      at cacheThumbnail (src/components/TextureAtlas.tsx:4915:28)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)".
      at console.warn (node_modules/@jest/console/build/BufferedConsole.js:191:10)
      at cacheThumbnail (src/components/TextureAtlas.tsx:4940:17)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Failed to cache thumbnail TypeError: Cannot read properties of undefined (reading 'createElement')
        at ThumbnailService.generateThumbnail (/app/src/services/thumbnailService.ts:460:40)
        at cacheThumbnail (/app/src/components/TextureAtlas.tsx:4915:28)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)".



      at ThumbnailService.generateThumbnail (src/services/thumbnailService.ts:460:40)
      at cacheThumbnail (src/components/TextureAtlas.tsx:4915:28)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)".
      at console.warn (node_modules/@jest/console/build/BufferedConsole.js:191:10)
      at cacheThumbnail (src/components/TextureAtlas.tsx:4940:17)

PASS unit tests/unit/PreviewPanel/PreviewPanel.test.tsx
PASS unit tests/unit/App.coverage.test.tsx
  ● Console

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

    console.error
      An update to App inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      46 |       // Always clear loading state. If redirecting, the page will unload anyway.
      47 |       // If error (and no redirect), we want to show the app content (possibly without user).
    > 48 |       setIsAuthChecking(false);
         |       ^
      49 |     };
      50 |
      51 |     checkAuth();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setIsAuthChecking (src/App.tsx:48:7)

PASS unit tests/unit/components/UniversalViewer/UniversalViewerCamera.test.tsx
  ● Console

    console.error
      Failed to init post processor: TypeError: this.gl.createShader is not a function
          at PostProcessor.createShader [as compileShader] (/app/src/utils/postProcessing.ts:174:32)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at node_modules/react/cjs/react.development.js:847:21

    console.error
      Adapter Init Failed TypeError: Cannot read properties of undefined (reading 'entities')
          at BspAdapter.entities [as loadMap] (/app/src/components/UniversalViewer/adapters/BspAdapter.ts:88:18)
          at BspAdapter.loadMap [as load] (/app/src/components/UniversalViewer/adapters/BspAdapter.ts:61:16)
          at load (/app/src/components/UniversalViewer/UniversalViewer.tsx:725:35)
          at initAdapter (/app/src/components/UniversalViewer/UniversalViewer.tsx:773:6)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at /app/node_modules/react/cjs/react.development.js:847:21
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      765 |
      766 |          } catch (e) {
    > 767 |              console.error("Adapter Init Failed", e);
          |                      ^
      768 |              setError(`Failed to load viewer: ${e instanceof Error ? e.message : String(e)}`);
      769 |              newAdapter?.cleanup();
      770 |          }

      at error (src/components/UniversalViewer/UniversalViewer.tsx:767:22)

PASS unit tests/unit/components/settings/GraphicsSettings.coverage.test.tsx
PASS unit tests/unit/components/settings/AccessibilitySettings.coverage.test.tsx
PASS unit tests/unit/components/DemoBrowser.search.test.tsx
PASS unit tests/unit/components/SoundAnalyzer.test.tsx
PASS unit tests/unit/Toolbar.test.tsx
PASS unit tests/unit/FileTree.test.tsx
PASS unit tests/unit/components/SaveLoadDialog.test.tsx
PASS unit tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx
  ● Console

    console.error
      Failed to init post processor: TypeError: this.gl.createShader is not a function
          at PostProcessor.createShader [as compileShader] (/app/src/utils/postProcessing.ts:174:32)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx:123:35)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx:123:35)

    console.error
      Failed to init post processor: TypeError: this.gl.createShader is not a function
          at PostProcessor.createShader [as compileShader] (/app/src/utils/postProcessing.ts:174:32)
          at PostProcessor.compileShader [as init] (/app/src/utils/postProcessing.ts:41:27)
          at init (/app/src/components/UniversalViewer/UniversalViewer.tsx:681:23)
          at Object.react_stack_bottom_frame (/app/node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (/app/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
          at commitHookEffectListMount (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (/app/node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
          at flushPassiveEffects (/app/node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
          at /app/node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
          at flushActQueue (/app/node_modules/react/cjs/react.development.js:590:34)
          at Object.<anonymous>.process.env.NODE_ENV.exports.act (/app/node_modules/react/cjs/react.development.js:884:10)
          at /app/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at renderRoot (/app/node_modules/@testing-library/react/dist/pure.js:190:26)
          at render (/app/node_modules/@testing-library/react/dist/pure.js:292:10)
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx:164:35)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      683 |             postProcessorRef.current = processor;
      684 |         } catch (err) {
    > 685 |             console.error("Failed to init post processor:", err);
          |                     ^
      686 |         }
      687 |
      688 |      } catch (e) {

      at error (src/components/UniversalViewer/UniversalViewer.tsx:685:21)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/UniversalViewerPicking.test.tsx:164:35)

PASS unit tests/unit/components/EntityDatabase.test.tsx
PASS unit tests/unit/components/UniversalViewer/ViewerControls.extra.test.tsx
PASS unit tests/unit/pakService.test.ts
  ● Console

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:164:23)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:164:23)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=38b4f7f2-7ffa-46f6-b088-3d9981d0f993, archive.name=38b4f7f2-7ffa-46f6-b088-3d9981d0f993

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:174:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:174:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=5b2b9aad-931d-4226-a688-ae175cd68e4d, archive.name=5b2b9aad-931d-4226-a688-ae175cd68e4d

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:183:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:183:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=3e3bd1a6-3bee-45e1-a136-2e61f43f2cea, archive.name=3e3bd1a6-3bee-45e1-a136-2e61f43f2cea

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:193:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:193:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=76c5ccac-774a-413c-bae0-6ee93b9bcfa3, archive.name=76c5ccac-774a-413c-bae0-6ee93b9bcfa3

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:202:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:202:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=eac55b69-adf9-4598-8c34-71f32d25c1e3, archive.name=eac55b69-adf9-4598-8c34-71f32d25c1e3

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:213:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:213:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=b595f79c-d198-4e5d-be92-8718fed6a61b, archive.name=b595f79c-d198-4e5d-be92-8718fed6a61b

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:220:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:220:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=0bdad078-9a0b-47be-bd5b-ce4e8b09ce30, archive.name=0bdad078-9a0b-47be-bd5b-ce4e8b09ce30

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:229:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:229:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=e07d4238-c107-4b0a-bc5a-59acdb490e68, archive.name=e07d4238-c107-4b0a-bc5a-59acdb490e68

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:240:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:240:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=95c4d117-c804-424a-b380-a593f79ac2ba, archive.name=95c4d117-c804-424a-b380-a593f79ac2ba

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:249:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:249:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=e80d2594-4e9a-4b30-8cde-7b974ba41f36, archive.name=e80d2594-4e9a-4b30-8cde-7b974ba41f36

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker processing failed for pics/test.pcx, falling back to main thread TypeError: _workerService.workerService.executeAssetProcessorTask is not a function
          at PakService.executeAssetProcessorTask [as parseFile] (/app/src/services/pakService.ts:400:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:251:22)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:251:22)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:257:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:257:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=8131930e-e2ae-484c-8cc5-ad5cf6f73713, archive.name=8131930e-e2ae-484c-8cc5-ad5cf6f73713

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker processing failed for models/test.md2, falling back to main thread TypeError: _workerService.workerService.executeAssetProcessorTask is not a function
          at PakService.executeAssetProcessorTask [as parseFile] (/app/src/services/pakService.ts:409:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:259:22)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:259:22)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:265:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:265:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=689f0d63-1dd8-4b9a-a5c8-e29d29ad4817, archive.name=689f0d63-1dd8-4b9a-a5c8-e29d29ad4817

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker processing failed for sprites/test.sp2, falling back to main thread TypeError: _workerService.workerService.executeAssetProcessorTask is not a function
          at PakService.executeAssetProcessorTask [as parseFile] (/app/src/services/pakService.ts:415:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:267:22)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:267:22)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:273:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:273:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=593cfb28-b004-4b3b-96f4-f57adce6fa48, archive.name=593cfb28-b004-4b3b-96f4-f57adce6fa48

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker processing failed for maps/test.bsp, falling back to main thread TypeError: _workerService.workerService.executeAssetProcessorTask is not a function
          at PakService.executeAssetProcessorTask [as parseFile] (/app/src/services/pakService.ts:421:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:275:22)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:275:22)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:281:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:281:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=76d0dee4-ea1b-4fae-98d3-7eeef7b7a321, archive.name=76d0dee4-ea1b-4fae-98d3-7eeef7b7a321

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:291:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:291:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=d790ad17-eff4-4d60-9561-e226f8280db5, archive.name=d790ad17-eff4-4d60-9561-e226f8280db5

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 5 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:302:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:302:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=d2bc4dda-cff7-48f1-a4d2-7985fe052ef4, archive.name=d2bc4dda-cff7-48f1-a4d2-7985fe052ef4

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 5 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.test.ts:314:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.test.ts:314:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=47167dea-a200-4dab-90a0-51ea7132b0cf, archive.name=47167dea-a200-4dab-90a0-51ea7132b0cf

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

PASS unit tests/unit/components/BookmarkList.test.tsx
PASS unit tests/unit/components/ScreenshotSettings.test.tsx
PASS unit tests/unit/components/GameMenu.test.tsx
PASS unit tests/unit/services/pakService.coverage.test.ts
  ● Console

    console.warn
      Worker processing failed for models/test.md2, falling back to main thread Error: Worker Fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:171:54)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:177:24)

    console.warn
      Worker processing failed for models/test.md2, falling back to main thread Error: Worker Fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:186:54)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:191:24)

    console.warn
      Failed to parse MD2 file models/test.md2: Error: Fallback Fail
          at /app/tests/unit/services/pakService.coverage.test.ts:189:51
          at /app/node_modules/jest-mock/build/index.js:397:39
          at /app/node_modules/jest-mock/build/index.js:404:13
          at mockConstructor (/app/node_modules/jest-mock/build/index.js:148:19)
          at PakService.parseFileFallback (/app/src/services/pakService.ts:461:33)
          at PakService.parseFileFallback [as parseFile] (/app/src/services/pakService.ts:432:19)
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:191:24)

      464 |         } catch (e) {
      465 |           const error = e instanceof Error ? e.message : String(e);
    > 466 |           console.warn(`Failed to parse MD2 file ${path}:`, e);
          |                   ^
      467 |           return { type: 'unknown', data, error };
      468 |         }
      469 |       }

      at PakService.warn [as parseFileFallback] (src/services/pakService.ts:466:19)
      at PakService.parseFileFallback [as parseFile] (src/services/pakService.ts:432:19)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:191:24)

    console.log
      [PakService] buildFileTree called with mode=by-pak, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Building tree for pak pak1.pak (id=id1), found 1 files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:553:21)

    console.log
      [PakService] Cache hit for test.pak, creating WorkerPakArchive with pakId=2c53d8ab-139e-4c58-8646-e6d3e16eed3a, archive.name=2c53d8ab-139e-4c58-8646-e6d3e16eed3a

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:198:17)

    console.log
      [PakService] Worker parsed test.pak: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for test.pak, creating WorkerPakArchive with pakId=07eccf5e-b3b8-43b3-abe8-cea6a1fe3a6a, archive.name=07eccf5e-b3b8-43b3-abe8-cea6a1fe3a6a

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

    console.warn
      Worker processing failed for test.pcx, falling back to main thread Error: fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:263:54)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:266:9)

    console.warn
      Worker processing failed for test.wal, falling back to main thread Error: fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:270:54)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:272:9)

    console.warn
      Worker processing failed for test.tga, falling back to main thread Error: fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:276:54)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:278:9)

    console.warn
      Worker processing failed for test.md3, falling back to main thread Error: fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:282:54)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:284:9)

    console.warn
      Worker processing failed for test.sp2, falling back to main thread Error: fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:288:54)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:290:9)

    console.warn
      Worker processing failed for test.wav, falling back to main thread Error: fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:294:54)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:296:9)

    console.warn
      Worker processing failed for test.bsp, falling back to main thread Error: fail
          at Object.<anonymous> (/app/tests/unit/services/pakService.coverage.test.ts:300:54)

      429 |       return result as ParsedFile;
      430 |     } catch (e) {
    > 431 |       console.warn(`Worker processing failed for ${path}, falling back to main thread`, e);
          |               ^
      432 |       return this.parseFileFallback(path, buffer, fileType, data);
      433 |     }
      434 |   }

      at PakService.warn [as parseFile] (src/services/pakService.ts:431:15)
      at Object.<anonymous> (tests/unit/services/pakService.coverage.test.ts:302:9)

PASS unit tests/unit/components/settings/AudioSettings.coverage.test.tsx
PASS unit tests/unit/pakService.treeBuilding.test.ts
  ● Console

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:113:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:113:7)

    console.log
      [PakService] Fallback for empty.pak, creating PakArchive with pakId=9e23e273-9300-4aba-8e6d-fb5dec8d8adf, archive.name=9e23e273-9300-4aba-8e6d-fb5dec8d8adf

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 0 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:125:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:125:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=a840df98-8d8b-4261-8ad8-2d1c534b59b7, archive.name=a840df98-8d8b-4261-8ad8-2d1c534b59b7

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:135:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:135:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=e302da49-1731-43ef-b070-01dff6f6dd8a, archive.name=e302da49-1731-43ef-b070-01dff6f6dd8a

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:149:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:149:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=f0876e05-3ab5-4a83-a63e-007d0ae4499f, archive.name=f0876e05-3ab5-4a83-a63e-007d0ae4499f

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:169:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:169:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=5ab5f60c-10d8-46f8-95d3-19e122ba5fb2, archive.name=5ab5f60c-10d8-46f8-95d3-19e122ba5fb2

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:195:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:195:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=cca52121-93de-4d84-b0b7-cc322dfb9efb, archive.name=cca52121-93de-4d84-b0b7-cc322dfb9efb

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 3 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:215:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:215:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=55912a9c-3870-4435-abc1-1f8a398ddca6, archive.name=55912a9c-3870-4435-abc1-1f8a398ddca6

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 4 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:239:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:239:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=bf2cd267-c2c5-4e77-8508-98fbf2228387, archive.name=bf2cd267-c2c5-4e77-8508-98fbf2228387

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 4 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:262:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:262:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=440a5f5c-3c60-4a16-9c1f-b74701a1f19d, archive.name=440a5f5c-3c60-4a16-9c1f-b74701a1f19d

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 2 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:278:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:278:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=0e3c39cd-b221-4d08-ab13-9b73cc21af59, archive.name=0e3c39cd-b221-4d08-ab13-9b73cc21af59

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 4 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:294:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:294:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=b5a53671-ba52-46c9-bad5-9b5070b3daa8, archive.name=b5a53671-ba52-46c9-bad5-9b5070b3daa8

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 4 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:323:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:323:7)

    console.log
      [PakService] Fallback for pak.pak, creating PakArchive with pakId=0f556bc4-1851-4ead-b5f1-ff5d6a510419, archive.name=0f556bc4-1851-4ead-b5f1-ff5d6a510419

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 9 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:362:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:362:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=25241c87-2e61-4af8-9fba-5be9add6e44c, archive.name=25241c87-2e61-4af8-9fba-5be9add6e44c

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 2 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:381:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:381:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=98de9e36-6cd9-4f02-9f7e-9c0e99c5a6d2, archive.name=98de9e36-6cd9-4f02-9f7e-9c0e99c5a6d2

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:392:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:392:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=3eb1ea13-dc82-40b1-a6f1-b009b073c654, archive.name=3eb1ea13-dc82-40b1-a6f1-b009b073c654

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:402:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:402:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=e047d450-805e-45ba-a146-81e157d5e790, archive.name=e047d450-805e-45ba-a146-81e157d5e790

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:422:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:422:7)

    console.log
      [PakService] Fallback for my.pak, creating PakArchive with pakId=017a87c4-fffc-4a08-9be7-488da994f9ae, archive.name=017a87c4-fffc-4a08-9be7-488da994f9ae

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

    console.warn
      Worker parsing failed, falling back to main thread TypeError: _workerService.workerService.executePakParserTask is not a function
          at PakService.executePakParserTask [as loadPakInternal] (/app/src/services/pakService.ts:207:42)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at processImmediate (node:internal/timers:453:9)
          at Object.<anonymous> (/app/tests/unit/pakService.treeBuilding.test.ts:435:7)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/pakService.treeBuilding.test.ts:435:7)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=43ca501e-e7c6-44e8-bcb0-17ac57340307, archive.name=43ca501e-e7c6-44e8-bcb0-17ac57340307

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

    console.log
      [PakService] buildFileTree called with mode=merged, mounted paks: 1

      at PakService.log [as buildFileTree] (src/services/pakService.ts:517:13)

    console.log
      [PakService] Merged mode: gathered 1 total files

      at PakService.log [as buildFileTree] (src/services/pakService.ts:578:17)

PASS unit tests/unit/gameService.test.ts
PASS unit tests/unit/components/SoundAnalyzerBranch.test.tsx
PASS unit tests/unit/components/settings/GeneralSettings.coverage.test.tsx
PASS unit tests/unit/components/WaveformCanvas.test.tsx
PASS unit tests/unit/components/SettingsPanel.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/BspAdapter.test.ts
PASS unit tests/unit/components/settings/ControlsSettings.coverage.test.tsx
PASS unit tests/unit/MetadataPanel.test.tsx
PASS unit tests/unit/components/LightmapInspector.test.tsx
PASS unit tests/unit/components/KeybindingEditor.test.tsx
PASS unit tests/unit/components/DemoStats.config.test.tsx
PASS unit tests/unit/PreviewPanel/HexPreview.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/Md3Adapter.coverage.test.ts
  ● Console

    console.warn
      Failed to load skin: Error: Load failed
          at Object.<anonymous> (/app/tests/unit/components/UniversalViewer/adapters/Md3Adapter.coverage.test.ts:82:47)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      60 |           this.skinTextures.set(name, tex);
      61 |         } catch (e) {
    > 62 |           console.warn('Failed to load skin:', e);
         |                   ^
      63 |         }
      64 |       }
      65 |     });

      at warn (src/components/UniversalViewer/adapters/Md3Adapter.ts:62:19)
          at async Promise.all (index 0)
      at Md3Adapter.load (src/components/UniversalViewer/adapters/Md3Adapter.ts:67:5)
      at Object.<anonymous> (tests/unit/components/UniversalViewer/adapters/Md3Adapter.coverage.test.ts:85:5)

PASS unit tests/unit/components/settings/CacheSettings.test.tsx
  ● Console

    console.error
      Error: Not implemented: navigation (except hash changes)
          at module.exports (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/not-implemented.js:9:17)
          at navigateFetch (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/window/navigation.js:77:3)
          at exports.navigate (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/window/navigation.js:55:3)
          at Timeout._onTimeout (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/nodes/HTMLHyperlinkElementUtils-impl.js:81:7)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7) {
        type: 'not implemented'
      }

      at VirtualConsole.<anonymous> (node_modules/jest-environment-jsdom/build/index.js:65:23)

PASS unit tests/unit/components/PostProcessSettings.test.tsx
PASS unit tests/unit/components/LightingControls.test.tsx
PASS unit tests/unit/components/UniversalViewer/BspAdapter.branches.test.ts
PASS unit tests/unit/components/ModelInspector.test.tsx
PASS unit tests/unit/PreviewPanel/TextPreview.test.tsx
PASS unit tests/unit/components/DemoBookmarks.test.tsx
PASS unit tests/unit/components/GameMenu.coverage.test.tsx
  ● Console

    console.error
      Error: Not implemented: navigation (except hash changes)
          at module.exports (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/browser/not-implemented.js:9:17)
          at navigateFetch (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/window/navigation.js:77:3)
          at exports.navigate (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/window/navigation.js:55:3)
          at Timeout._onTimeout (/app/node_modules/jest-environment-jsdom/node_modules/jsdom/lib/jsdom/living/nodes/HTMLHyperlinkElementUtils-impl.js:81:7)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7) {
        type: 'not implemented'
      }

      at VirtualConsole.<anonymous> (node_modules/jest-environment-jsdom/build/index.js:65:23)

PASS unit tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts
  ● Console

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:141:19)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:161:19)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:187:19)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:218:19)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:252:21)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.test.ts:272:21)

PASS unit tests/unit/ResizablePanel.test.tsx
PASS unit tests/unit/components/PerformanceStats.test.tsx
PASS unit tests/unit/components/Console.test.tsx
PASS unit tests/unit/components/DemoBrowser.test.tsx
  ● Console

    console.error
      An update to DemoBrowser inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      31 |       setLoading(true);
      32 |       const list = await demoStorageService.getDemos();
    > 33 |       setDemos(list);
         |       ^
      34 |
      35 |       // Load all metadata
      36 |       const allMeta = demoMetadataService.getAllMetadata();

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setDemos (src/components/DemoBrowser.tsx:33:7)

    console.error
      An update to DemoBrowser inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      39 |         metaMap[m.id] = m;
      40 |       });
    > 41 |       setMetadataMap(metaMap);
         |       ^
      42 |
      43 |     } catch (err) {
      44 |       setError(err instanceof Error ? err.message : 'Failed to load demos');

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setMetadataMap (src/components/DemoBrowser.tsx:41:7)

    console.error
      An update to DemoBrowser inside a test was not wrapped in act(...).

      When testing, code that causes React state updates should be wrapped into act(...):

      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */

      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      44 |       setError(err instanceof Error ? err.message : 'Failed to load demos');
      45 |     } finally {
    > 46 |       setLoading(false);
         |       ^
      47 |     }
      48 |   };
      49 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:18757:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:16409:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:9170:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:9127:7)
      at setLoading (src/components/DemoBrowser.tsx:46:7)

PASS unit tests/unit/components/BspAnalyzerStats.test.tsx
PASS unit tests/unit/components/PakOrderManager.test.tsx
PASS unit tests/unit/services/AssetCrossRefService.test.ts
PASS unit tests/unit/components/DemoMetadata.test.tsx
PASS unit tests/unit/services/gameService.test.ts
PASS unit tests/unit/services/cacheService.coverage.test.ts
PASS unit tests/unit/components/CameraSettingsPanel.test.tsx
PASS unit tests/unit/components/BookmarkDialog.test.tsx
PASS unit tests/unit/components/VideoSettings.test.tsx
PASS unit tests/unit/components/ServerBrowser.test.tsx
PASS unit tests/unit/components/BspAnalyzer.test.tsx
PASS unit tests/unit/components/Toolbar.test.tsx
PASS unit tests/unit/PreviewPanel/ModelPreview.test.tsx
PASS unit tests/unit/services/videoRecorder.coverage.test.ts
  ● Console

    console.error
      Failed to start recording: Error: Init Fail
          at mockConstructor.<anonymous> (/app/tests/unit/services/videoRecorder.coverage.test.ts:61:17)
          at /app/node_modules/jest-mock/build/index.js:387:43
          at mockConstructor.<anonymous> (/app/node_modules/jest-mock/build/index.js:404:13)
          at new mockConstructor (/app/node_modules/jest-mock/build/index.js:148:19)
          at VideoRecorderService.startRecording (/app/src/services/videoRecorder.ts:44:28)
          at startRecording (/app/tests/unit/services/videoRecorder.coverage.test.ts:64:28)
          at Object.<anonymous> (/app/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/app/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/app/tests/unit/services/videoRecorder.coverage.test.ts:64:56)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      57 |       this.isRecordingState = true;
      58 |     } catch (error) {
    > 59 |       console.error('Failed to start recording:', error);
         |               ^
      60 |       throw new Error(`Failed to start recording: ${error instanceof Error ? error.message : String(error)}`);
      61 |     }
      62 |   }

      at VideoRecorderService.error [as startRecording] (src/services/videoRecorder.ts:59:15)
      at startRecording (tests/unit/services/videoRecorder.coverage.test.ts:64:28)
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/services/videoRecorder.coverage.test.ts:64:56)

PASS unit tests/unit/components/UniversalViewer/ViewerControls.demoStepping.test.tsx
PASS unit tests/unit/pakService.priority.test.ts
  ● Console

    console.log
      [PakService] Worker parsed mod.pak: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for mod.pak, creating WorkerPakArchive with pakId=mod, archive.name=mod

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

    console.log
      [PakService] Worker parsed base.pak: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for base.pak, creating WorkerPakArchive with pakId=base, archive.name=base

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

    console.log
      [PakService] Cache hit for mod.pak, creating WorkerPakArchive with pakId=mod, archive.name=mod

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:198:17)

    console.log
      [PakService] Cache hit for base.pak, creating WorkerPakArchive with pakId=base, archive.name=base

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:198:17)

    console.log
      [PakService] Worker parsed A: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for A, creating WorkerPakArchive with pakId=a, archive.name=a

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

    console.log
      [PakService] Worker parsed B: { entriesType: 'object', isMap: true, size: 0, keys: [] }

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:209:15)

    console.log
      [PakService] Worker success for B, creating WorkerPakArchive with pakId=b, archive.name=b

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:236:15)

PASS unit tests/unit/components/UniversalViewer/adapters/Md3Adapter.test.ts
PASS unit tests/unit/utils/WorkerPakArchive.test.ts
PASS unit tests/unit/services/screenshotService.test.ts
PASS unit tests/unit/components/ThemeSelector.test.tsx
PASS unit tests/unit/workers/assetProcessor.worker.test.ts
PASS unit tests/unit/components/UniversalViewer/ViewerControls.integration.test.tsx
PASS unit tests/unit/utils/postProcessing.coverage.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraSettings.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts
  ● Console

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

    console.warn
      Map file not found: maps/demo1.bsp

      65 |          }
      66 |     } else {
    > 67 |         console.warn('Map file not found:', mapPath);
         |                 ^
      68 |     }
      69 |
      70 |     this.controller.play();

      at Dm2Adapter.warn (src/components/UniversalViewer/adapters/Dm2Adapter.ts:67:17)
      at Object.load (tests/unit/components/UniversalViewer/adapters/Dm2Adapter.cameraMode.test.ts:50:23)

PASS unit tests/unit/components/DemoStats.test.tsx
PASS unit tests/unit/services/entityService.test.ts
  ● Console

    console.warn
      Failed to parse entities from maps/bad.bsp: Error: Parse error
          at /app/tests/unit/services/entityService.test.ts:88:47
          at /app/node_modules/jest-mock/build/index.js:397:39
          at /app/node_modules/jest-mock/build/index.js:404:13
          at mockConstructor (/app/node_modules/jest-mock/build/index.js:148:19)
          at EntityService.scanAllMaps (/app/src/services/entityService.ts:56:29)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at Object.<anonymous> (/app/tests/unit/services/entityService.test.ts:90:21)

      60 |         allEntities.push(...mapEntities);
      61 |       } catch (err) {
    > 62 |         console.warn(`Failed to parse entities from ${bspPath}:`, err);
         |                 ^
      63 |       }
      64 |     }
      65 |

      at EntityService.warn [as scanAllMaps] (src/services/entityService.ts:62:17)
      at Object.<anonymous> (tests/unit/services/entityService.test.ts:90:21)

PASS unit tests/unit/components/EntityLegend.test.tsx
PASS unit tests/unit/adapters.debugMode.test.ts
PASS unit tests/unit/SpriteViewer.test.tsx
PASS unit tests/unit/services/themeService.test.ts
PASS unit tests/unit/components/GameHUD.coverage.test.tsx
PASS unit tests/unit/services/multiplayerGameService.coverage.test.ts
PASS unit tests/unit/services/demoStorageService.coverage.test.ts
PASS unit tests/unit/adapters/BspAdapterLighting.test.ts
PASS unit tests/unit/utils/postProcessing.test.ts
PASS unit tests/unit/services/bookmarkService.test.ts
  ● Console

    console.error
      Failed to import bookmarks SyntaxError: Expected property name or '}' in JSON at position 2 (line 1 column 3)
          at JSON.parse (<anonymous>)
          at BookmarkService.parse [as importBookmarks] (/app/src/services/bookmarkService.ts:107:51)
          at importBookmarks (/app/tests/unit/services/bookmarkService.test.ts:158:27)
          at Object.<anonymous> (/app/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/app/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/app/tests/unit/services/bookmarkService.test.ts:158:71)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      146 |
      147 |     } catch (e) {
    > 148 |       console.error('Failed to import bookmarks', e);
          |               ^
      149 |       throw new Error('Failed to parse bookmark file');
      150 |     }
      151 |   }

      at BookmarkService.error [as importBookmarks] (src/services/bookmarkService.ts:148:15)
      at importBookmarks (tests/unit/services/bookmarkService.test.ts:158:27)
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/services/bookmarkService.test.ts:158:71)

    console.error
      Failed to import bookmarks Error: Invalid bookmark format: missing bookmarks array
          at BookmarkService.importBookmarks (/app/src/services/bookmarkService.ts:109:15)
          at importBookmarks (/app/tests/unit/services/bookmarkService.test.ts:163:26)
          at Object.<anonymous> (/app/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/app/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/app/tests/unit/services/bookmarkService.test.ts:163:64)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      146 |
      147 |     } catch (e) {
    > 148 |       console.error('Failed to import bookmarks', e);
          |               ^
      149 |       throw new Error('Failed to parse bookmark file');
      150 |     }
      151 |   }

      at BookmarkService.error [as importBookmarks] (src/services/bookmarkService.ts:148:15)
      at importBookmarks (tests/unit/services/bookmarkService.test.ts:163:26)
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/services/bookmarkService.test.ts:163:64)

    console.warn
      Clip extraction is not yet supported by the underlying library.

      167 |     // return DemoUtils.extractRange(demoBuffer, startFrame, endFrame);
      168 |
    > 169 |     console.warn('Clip extraction is not yet supported by the underlying library.');
          |             ^
      170 |     return null;
      171 |   }
      172 | }

      at BookmarkService.warn [as extractClip] (src/services/bookmarkService.ts:169:13)
      at Object.extractClip (tests/unit/services/bookmarkService.test.ts:168:34)

PASS unit tests/unit/helpers.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/Md2Adapter.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/BspAdapter_Extended.test.ts
PASS unit tests/unit/DropZone.test.tsx
PASS unit tests/unit/entityEditorService.test.ts
PASS unit tests/unit/services/workerService.test.ts
PASS unit tests/unit/services/saveService.coverage.test.ts
PASS unit tests/unit/components/FrequencySpectrum.test.tsx
PASS unit tests/unit/components/BspOptimizationTab.test.tsx
PASS unit tests/unit/services/performanceService.test.ts
  ● Console

    console.warn
      Failed to measure invalid-op: Error: Invalid mark
          at Object.<anonymous> (/app/tests/unit/services/performanceService.test.ts:86:19)
          at /app/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/app/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as measure] (/app/node_modules/jest-mock/build/index.js:148:19)
          at Object.measure [as endMeasure] (/app/src/services/performanceService.ts:78:29)
          at endMeasure (/app/tests/unit/services/performanceService.test.ts:91:32)
          at Object.<anonymous> (/app/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/app/node_modules/expect/build/index.js:320:21)
          at Object.toThrow (/app/tests/unit/services/performanceService.test.ts:92:16)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      80 |         } catch (e) {
      81 |             // Ignore errors if marks are missing (e.g. if startMeasure wasn't called)
    > 82 |             console.warn(`Failed to measure ${name}:`, e);
         |                     ^
      83 |         }
      84 |     }
      85 | };

      at Object.warn [as endMeasure] (src/services/performanceService.ts:82:21)
      at endMeasure (tests/unit/services/performanceService.test.ts:91:32)
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (tests/unit/services/performanceService.test.ts:92:16)

PASS unit tests/unit/components/UniversalViewer/adapters/BspAdapter.manipulation.test.ts
PASS unit tests/unit/components/CameraSettingsPanel.cinematic.test.tsx
PASS unit tests/unit/services/indexedDBService.test.ts
PASS unit tests/unit/components/SurfaceFlags.test.tsx
PASS unit tests/unit/services/modelExportService.test.ts
PASS unit tests/unit/services/demoRecorder.coverage.test.ts
  ● Console

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Saved demo test.dm2 to storage (10 bytes)".

      44 |       try {
      45 |         await demoStorageService.saveDemo(filename, data);
    > 46 |         console.log(`Saved demo ${filename} to storage (${data.length} bytes)`);
         |                 ^
      47 |       } catch (err) {
      48 |         console.error('Failed to auto-save demo:', err);
      49 |       }

      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)
      at DemoRecorderService.log [as stopRecording] (src/services/demoRecorder.ts:46:17)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Saved demo test.dm2 to storage (10 bytes)".

      44 |       try {
      45 |         await demoStorageService.saveDemo(filename, data);
    > 46 |         console.log(`Saved demo ${filename} to storage (${data.length} bytes)`);
         |                 ^
      47 |       } catch (err) {
      48 |         console.error('Failed to auto-save demo:', err);
      49 |       }

      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)
      at DemoRecorderService.log [as stopRecording] (src/services/demoRecorder.ts:46:17)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Saved demo test.dm2 to storage (10 bytes)".

      44 |       try {
      45 |         await demoStorageService.saveDemo(filename, data);
    > 46 |         console.log(`Saved demo ${filename} to storage (${data.length} bytes)`);
         |                 ^
      47 |       } catch (err) {
      48 |         console.error('Failed to auto-save demo:', err);
      49 |       }

      at console.log (node_modules/@jest/console/build/BufferedConsole.js:156:10)
      at DemoRecorderService.log [as stopRecording] (src/services/demoRecorder.ts:46:17)

PASS unit tests/unit/services/cacheService.test.ts
PASS unit tests/unit/components/LoadingScreen.test.tsx
PASS unit tests/unit/services/indexedDBService.coverage.test.ts
PASS unit tests/unit/utils/postProcessing.error.test.ts
PASS unit tests/unit/services/workerService.coverage.test.ts
PASS unit tests/unit/services/networkService.coverage.test.ts
PASS unit tests/unit/services/consoleService.test.ts
PASS unit tests/unit/services/settingsService.test.ts
PASS unit tests/unit/saveService.test.ts
PASS unit tests/unit/services/predictionService.test.ts
PASS unit tests/unit/components/PerformanceGraph.test.tsx
PASS unit tests/unit/components/UniversalViewer/adapters/BspAdapter.extra.test.ts
PASS unit tests/unit/services/videoRecorder.test.ts
PASS unit tests/unit/services/videoRecorder.error.test.ts
PASS unit tests/unit/services/gameService.console.test.ts
PASS unit tests/unit/services/inputService.test.ts
PASS unit tests/unit/services/authService.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/DebugRenderer.test.ts
PASS unit tests/unit/utils/cameraUtils.coverage.test.ts
PASS unit tests/unit/components/UniversalViewer/adapters/GizmoRenderer.coverage.test.ts
PASS unit tests/unit/utils/gameLoop.coverage.test.ts
PASS unit tests/unit/utils/cameraUtils.test.ts
PASS unit tests/unit/services/inputService.coverage.test.ts
PASS unit tests/unit/utils/sp2Parser.test.ts
PASS unit tests/unit/services/pakService.fallback.test.ts
  ● Console

    console.warn
      Worker parsing failed, falling back to main thread Error: Worker crashed
          at Object.<anonymous> (/app/tests/unit/services/pakService.fallback.test.ts:65:77)
          at Promise.then.completed (/app/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/app/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/app/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/app/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/app/node_modules/jest-circus/build/run.js:121:9)
          at run (/app/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/app/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/app/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/app/node_modules/jest-runner/build/testWorker.js:106:12)

      238 |       return archive;
      239 |     } catch (error) {
    > 240 |       console.warn('Worker parsing failed, falling back to main thread', error);
          |               ^
      241 |       const archive = PakArchive.fromArrayBuffer(pakId, buffer);
      242 |       console.log(`[PakService] Fallback for ${name}, creating PakArchive with pakId=${pakId}, archive.name=${archive.name}`);
      243 |       this.mountPak(archive, pakId, name, isUser, priority, hash || undefined);

      at PakService.warn [as loadPakInternal] (src/services/pakService.ts:240:15)
      at Object.<anonymous> (tests/unit/services/pakService.fallback.test.ts:76:24)

    console.log
      [PakService] Fallback for test.pak, creating PakArchive with pakId=test-pak-id, archive.name=undefined

      at PakService.log [as loadPakInternal] (src/services/pakService.ts:242:15)

PASS unit tests/unit/services/demoRecorder.test.ts
  ● Console

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

    console.warn
      Already recording demo

      20 |   public startRecording(filename: string): void {
      21 |     if (this.isRecording()) {
    > 22 |       console.warn('Already recording demo');
         |               ^
      23 |       return;
      24 |     }
      25 |

      at DemoRecorderService.warn [as startRecording] (src/services/demoRecorder.ts:22:15)
      at Object.startRecording (tests/unit/services/demoRecorder.test.ts:45:27)

    console.warn
      Already recording demo

      20 |   public startRecording(filename: string): void {
      21 |     if (this.isRecording()) {
    > 22 |       console.warn('Already recording demo');
         |               ^
      23 |       return;
      24 |     }
      25 |

      at DemoRecorderService.warn [as startRecording] (src/services/demoRecorder.ts:22:15)
      at Object.startRecording (tests/unit/services/demoRecorder.test.ts:50:27)

    console.log
      Saved demo test.dm2 to storage (3 bytes)

      at DemoRecorderService.log [as stopRecording] (src/services/demoRecorder.ts:46:17)

    console.log
      Started recording demo: test.dm2

      at DemoRecorderService.log [as startRecording] (src/services/demoRecorder.ts:29:13)

PASS unit tests/unit/services/demoMetadataService.test.ts
PASS unit tests/unit/components/EntityMetadata.test.tsx
PASS unit tests/unit/modDetectionService.test.ts
PASS unit tests/unit/workers/indexer.worker.test.ts
PASS unit tests/unit/utils/cameraPath.extra.test.ts
PASS unit tests/unit/components/SpeedGraph.test.tsx
PASS unit tests/unit/utils/cameraPath.test.ts
PASS unit tests/unit/services/consoleService.extra.test.ts
PASS unit tests/unit/components/FrameInfo.test.tsx
PASS unit tests/unit/services/assetCrossRefService.coverage.test.ts
PASS unit tests/unit/utils/transformUtils.test.ts
PASS unit tests/unit/utils/gameLoop.test.ts
PASS unit tests/unit/services/demoStorageService.test.ts
PASS unit tests/unit/workers/assetProcessor.worker.coverage.test.ts
PASS unit tests/unit/workers/pakParser.worker.test.ts
PASS unit tests/unit/utils/collisionAdapter.coverage.test.ts
PASS unit tests/unit/utils/cameraUtils.extra.test.ts
PASS unit tests/unit/utils/camera.test.ts
PASS unit tests/unit/services/thumbnailService.coverage.test.ts
PASS unit tests/unit/services/keybindingService.test.ts
PASS unit tests/unit/inputService.bindings.test.ts
PASS unit tests/unit/utils/surfaceFlagParser.coverage.test.ts
PASS unit tests/unit/services/predictionService.coverage.test.ts
PASS unit tests/unit/utils/gameLoop.extra.test.ts
PASS unit tests/unit/types/enums.test.ts
PASS unit tests/unit/utils/surfaceFlagParser.test.ts
-----------------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File                                     | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s
-----------------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
All files                                |      85 |    71.03 |   85.15 |   86.91 |
 src                                     |   79.01 |    58.53 |   71.42 |   78.48 |
  App.tsx                                |   79.01 |    58.53 |   71.42 |   78.48 | 38-39,104-106,121,127,133,140,146-152,235-240,263,277,286-287,291-296,309,325,327,340-351,386-387
 src/components                          |   81.84 |    72.46 |   83.13 |   83.76 |
  BookmarkDialog.tsx                     |     100 |     92.3 |     100 |     100 | 43
  BookmarkList.tsx                       |   94.73 |     62.5 |    87.5 |   94.73 | 24
  BspAnalyzer.tsx                        |   78.94 |    65.47 |   79.16 |   79.71 | 96-123,150,398-400,410,440
  BspOptimizationTab.tsx                 |   92.98 |       80 |     100 |     100 | 20,66-71,89,116
  CameraSettingsPanel.tsx                |   66.66 |      100 |   57.14 |   66.66 | 57-83
  Console.tsx                            |   98.33 |    86.11 |     100 |   98.24 | 81
  DemoBookmarks.tsx                      |   63.88 |    57.14 |    62.5 |   62.85 | 36-38,81,85-86,90-99,103-116
  DemoBrowser.tsx                        |    83.9 |    80.76 |    90.9 |   83.54 | 44,103,108-116,122,208
  DemoMetadata.tsx                       |   86.36 |    79.06 |      90 |   91.17 | 50,64,129
  DemoStats.tsx                          |   91.76 |    88.23 |   95.45 |   93.67 | 60,138-140,226
  DemoTimeline.tsx                       |   82.47 |    64.16 |   86.66 |   86.03 | 19-23,173-176,189-191,199-200,209-210,222-228,253,279,311-312
  DropZone.tsx                           |     100 |    83.33 |     100 |     100 | 16-26
  EntityDatabase.tsx                     |      82 |       86 |   83.33 |   83.33 | 68,125,133-134,179,189-195,222-231,256
  EntityInspector.tsx                    |   88.88 |      100 |   66.66 |   88.88 | 26
  EntityLegend.tsx                       |     100 |      100 |     100 |     100 |
  EntityMetadata.tsx                     |     100 |       75 |     100 |     100 | 21
  FrameInfo.tsx                          |   94.44 |     62.5 |     100 |     100 | 15-19
  FrequencySpectrum.tsx                  |   81.13 |    59.09 |   85.71 |   84.78 | 29-31,83-86
  GameHUD.tsx                            |   95.65 |    92.85 |      75 |     100 | 70
  GameMenu.tsx                           |     100 |       90 |     100 |     100 | 64
  KeybindingEditor.tsx                   |   64.55 |    63.46 |   84.21 |   66.66 | 32-34,45-49,61-83,102-104,193
  LightingControls.tsx                   |   83.33 |      100 |      75 |   81.81 | 57-69
  LightmapInspector.tsx                  |    67.2 |    61.11 |   84.61 |   68.37 | 37,43,110-151,156,202-213
  LoadingScreen.tsx                      |     100 |      100 |     100 |     100 |
  MetadataPanel.tsx                      |   93.93 |    78.26 |     100 |   93.33 | 127,233
  ModelInspector.tsx                     |   84.93 |    65.38 |   85.71 |   84.05 | 29-35,74-77,97-98
  PakOrderManager.tsx                    |   75.36 |     62.5 |      75 |   76.19 | 50-52,159-160,165-169,173-181
  PerformanceGraph.tsx                   |      96 |    83.33 |     100 |     100 | 14-16
  PerformanceStats.tsx                   |      90 |    93.33 |     100 |     100 | 18,100
  PostProcessSettings.tsx                |     100 |      100 |     100 |     100 |
  PreviewPanel.tsx                       |   83.87 |    72.22 |   85.71 |   83.33 | 81,115,157-161,173
  ResizablePanel.tsx                     |   63.15 |    77.41 |    62.5 |   64.86 | 35-38,43-50,54,58-61
  SaveLoadDialog.tsx                     |   81.48 |     72.5 |   92.85 |   81.63 | 33,45-46,52-53,63,73-74,131
  ScreenshotSettings.tsx                 |     100 |      100 |     100 |     100 |
  ServerBrowser.tsx                      |   71.05 |    81.48 |   66.66 |   72.22 | 55-68,109,162
  SettingsPanel.tsx                      |   63.46 |    51.72 |      50 |   63.26 | 75-110,115,146-174
  SoundAnalyzer.tsx                      |   87.86 |    61.97 |    90.9 |   90.18 | 77,97-120,143,384
  SpeedGraph.tsx                         |   94.87 |       80 |     100 |     100 | 20-22,56
  SpriteViewer.tsx                       |   93.22 |    80.76 |      90 |      98 | 113
  SurfaceFlags.tsx                       |     100 |    91.66 |     100 |     100 | 56
  TextureAtlas.tsx                       |      64 |     59.8 |   58.62 |   68.36 | 79,140-163,172-173,238-245,249-252,258-271,275-294,315,405,453-460
  ThemeSelector.tsx                      |     100 |       50 |     100 |     100 | 24
  Toolbar.tsx                            |   95.45 |    96.42 |    87.5 |   95.23 | 43
  UserDisplay.tsx                        |     100 |      100 |     100 |     100 |
  VideoSettings.tsx                      |   83.33 |    83.33 |      75 |    82.6 | 29-30,89-100
  WaveformCanvas.tsx                     |   84.61 |    67.74 |      80 |   88.88 | 80-81,107-110
 src/components/FileTree                 |   53.02 |    44.61 |   52.94 |   52.85 |
  FileSearch.tsx                         |   36.84 |       16 |   35.29 |   36.53 | 11-27,45-47,65,70-71,75-76,82-96,108-121
  index.tsx                              |   63.04 |     62.5 |   70.58 |    62.5 | 40-44,49,69-75,81-83,145,191-218,224-226
 src/components/UniversalViewer          |   71.18 |    63.26 |   64.46 |   73.49 |
  UniversalViewer.tsx                    |   67.79 |    57.91 |   58.69 |   69.96 | 64-67,156-162,185,196-203,216,231,280-282,291-292,302-303,332,339-340,350-351,358,362-394,399-435,453-455,476-478,501,543,562-567,589-591,642-643,682-683,689-690,695-696,720,809,818-839,872-906,943-944,1031-1036,1063-1071,1092,1108-1109,1124,1137,1155,1163,1192,1215-1222,1243-1279,1317-1318,1333-1417
  ViewerControls.tsx                     |   93.51 |       92 |   82.75 |   95.28 | 225,227-229,373
 src/components/UniversalViewer/adapters |   90.32 |    73.04 |   92.66 |   93.09 |
  BspAdapter.ts                          |    83.1 |    69.31 |   87.87 |    87.9 | 167,308,315-325,426,435,515-516,521-525,534-535,588-598,674-676,678-680,697-704,729,734
  DebugRenderer.ts                       |   98.79 |    94.11 |     100 |     100 | 62
  Dm2Adapter.ts                          |   85.71 |    58.82 |   84.21 |   88.35 | 80-82,142-153,190-199,233-234,307
  GizmoRenderer.ts                       |   99.04 |    84.25 |     100 |   99.46 | 226
  Md2Adapter.ts                          |   92.24 |    72.54 |   94.44 |   95.65 | 63,87-88,203,244
  Md3Adapter.ts                          |   99.19 |    90.47 |     100 |   99.15 | 74
  bspAdapterTypes.ts                     |       0 |        0 |       0 |       0 |
  types.ts                               |       0 |        0 |       0 |       0 |
 src/components/settings                 |   88.88 |     60.6 |   96.87 |   91.91 |
  AccessibilitySettings.tsx              |     100 |      100 |     100 |     100 |
  AdvancedSettings.tsx                   |   82.85 |      100 |   84.61 |   82.35 | 41-42,49-50,57-58
  AudioSettings.tsx                      |     100 |      100 |     100 |     100 |
  CacheSettings.tsx                      |   83.87 |    58.06 |     100 |   91.07 | 38-39,50-51,69
  ControlsSettings.tsx                   |     100 |      100 |     100 |     100 |
  GeneralSettings.tsx                    |     100 |      100 |     100 |     100 |
  GraphicsSettings.tsx                   |     100 |      100 |     100 |     100 |
 src/config                              |     100 |      100 |     100 |     100 |
  defaultBindings.ts                     |     100 |      100 |     100 |     100 |
 src/hooks                               |   92.43 |    67.56 |      96 |   93.33 |
  usePakExplorer.ts                      |   92.43 |    67.56 |      96 |   93.33 | 111-112,151,174,208,237,267-271,282,325-326
 src/services                            |   89.19 |    74.33 |   89.79 |   91.33 |
  assetCrossRefService.ts                |   87.96 |    70.58 |   93.33 |   89.58 | 90,116-131,186,215
  authService.ts                         |     100 |    83.33 |     100 |     100 | 59
  bookmarkService.ts                     |   95.38 |       88 |     100 |      95 | 46-47,120
  cacheService.ts                        |   89.58 |    76.31 |   83.72 |   95.93 | 38,173-175,220
  consoleService.ts                      |   93.24 |    72.41 |     100 |   97.01 | 99,122
  demoMetadataService.ts                 |    92.5 |    76.47 |     100 |    92.3 | 26,48,65
  demoRecorder.ts                        |   87.09 |       75 |   85.71 |   87.09 | 34-35,48,66
  demoStorageService.ts                  |   89.58 |    75.86 |   85.18 |     100 | 20-39,52,89,109,124,139
  entityEditorService.ts                 |   97.36 |    76.92 |     100 |   97.05 | 57
  entityService.ts                       |   95.83 |    74.19 |     100 |   97.77 | 147
  gameService.ts                         |   84.21 |    75.53 |   72.97 |   86.01 | 113,151-153,170,262-266,305,390-393,413,468,478,498,518-520,541
  indexedDBService.ts                    |   89.23 |    72.22 |   84.21 |     100 | 33,45,84-99
  inputService.ts                        |      92 |    78.57 |     100 |     100 | 26,40-62
  keybindingService.ts                   |   64.55 |    41.17 |   68.18 |   63.07 | 74-77,101,151-153,175-219,229
  modDetectionService.ts                 |   87.87 |    72.72 |     100 |   87.87 | 53,59,91,114
  modelExportService.ts                  |   94.91 |     62.5 |     100 |   98.14 | 17
  multiplayerGameService.ts              |      88 |    93.05 |    87.5 |   91.66 | 45,57,169-170
  networkService.ts                      |   88.83 |    67.77 |   89.65 |   88.94 | 71,123,136,144-147,209,274-275,277,279,286-293,303-304,326-328,369,436
  pakService.ts                          |   82.33 |    65.21 |   89.36 |   82.88 | 203,218-223,230,264-265,276,288,306,401,404,407,413,416,419,422-424,427,448-451,475-477,485-491,498-500,512,547-548,556-559,656-660
  performanceService.ts                  |    91.3 |       88 |    90.9 |      95 | 29,57
  predictionService.ts                   |   96.42 |    92.85 |     100 |   96.15 | 86
  protocolConstants.ts                   |     100 |      100 |     100 |     100 |
  saveService.ts                         |   91.89 |    81.25 |     100 |   91.42 | 39,53,78
  screenshotService.ts                   |   96.36 |     86.2 |     100 |   96.15 | 29,54
  settingsService.ts                     |    92.1 |    84.61 |     100 |   91.66 | 24,35,71
  themeService.ts                        |     100 |     87.5 |     100 |     100 | 41
  thumbnailService.ts                    |     100 |      100 |     100 |     100 |
  videoRecorder.ts                       |   95.74 |    89.65 |    87.5 |   95.74 | 34,80
  workerService.ts                       |     100 |       75 |     100 |     100 | 106-165
 src/themes                              |     100 |      100 |     100 |     100 |
  darkTheme.ts                           |     100 |      100 |     100 |     100 |
  highContrastTheme.ts                   |     100 |      100 |     100 |     100 |
  lightTheme.ts                          |     100 |      100 |     100 |     100 |
 src/types                               |     100 |      100 |     100 |     100 |
  CameraSettings.ts                      |     100 |      100 |     100 |     100 |
  modInfo.ts                             |     100 |      100 |     100 |     100 |
  settings.ts                            |     100 |      100 |     100 |     100 |
 src/utils                               |    98.5 |    85.64 |     100 |   99.06 |
  WorkerPakArchive.ts                    |   90.47 |       75 |     100 |      90 | 39-40
  camera.ts                              |     100 |      100 |     100 |     100 |
  cameraPath.ts                          |     100 |     87.5 |     100 |     100 | 101-107,114
  cameraUtils.ts                         |     100 |       75 |     100 |     100 | 33-35,188
  collisionAdapter.ts                    |     100 |       84 |     100 |     100 | 50,76-86
  gameLoop.ts                            |     100 |    76.92 |     100 |     100 | 51,66-76
  helpers.ts                             |   95.74 |    91.11 |     100 |   95.34 | 32,91
  postProcessing.ts                      |   98.19 |    80.48 |     100 |     100 | 88-99,112,169-170,190-200
  sp2Parser.ts                           |     100 |      100 |     100 |     100 |
  surfaceFlagParser.ts                   |     100 |      100 |     100 |     100 |
  transformUtils.ts                      |   96.66 |     87.5 |     100 |     100 | 52
 src/workers                             |   98.18 |    80.59 |     100 |   98.14 |
  assetProcessor.worker.ts               |     100 |       80 |     100 |     100 | 37-42
  indexer.worker.ts                      |   96.96 |     80.7 |     100 |   96.87 | 79-80
  pakParser.worker.ts                    |     100 |      100 |     100 |     100 |
-----------------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Test Suites: 171 passed, 171 total
Tests:       1115 passed, 1115 total
Snapshots:   0 total
Time:        53.775 s
Ran all test suites.
